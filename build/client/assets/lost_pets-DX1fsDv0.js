import{w as q}from"./with-props-C_P4RWeF.js";import{w as C,o as a,x as L,a as N}from"./chunk-LSOULM7L-DOIZURii.js";import{N as B}from"./navbar-mFlRC7PZ.js";import{B as T}from"./button-BwhTU3xm.js";import{S as j}from"./separator-BHgjR1J0.js";import{f as K}from"./animalTypes-zlv_8E1P.js";import{a as _,s as E}from"./routes-CTRM3soR.js";import{M as F}from"./index-2UufBPTQ.js";import{C as Q}from"./circle-alert-CwKWgOV7.js";import{c as G}from"./createLucideIcon-BXJY-pLu.js";import{A as J,S as w}from"./skeleton-CpORVbC8.js";import"./index-CGXivZb0.js";import"./index-BPjMvHEu.js";import"./iconBase-DWGiJmbw.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],V=G("map-pinned",O),W=({heading:e,lostPets:t})=>{const r=C();return a.jsx("section",{className:"py-7 sm:py-12",children:a.jsxs("div",{className:"container mx-auto",children:[a.jsxs("div",{className:"flex w-full flex-row items-center justify-center px-3 sm:px-0 sm:justify-between mb-2 md:mb-4 lg:mb-5",children:[a.jsx("h2",{className:"text-3xl mb-5 font-semibold md:text-4xl text-center",children:e}),a.jsx("div",{className:"fixed bottom-7 right-6 sm:static",children:a.jsxs(T,{variant:"destructive",onClick:()=>r(_.reportLostPet),className:"bg-red-700 text-white rounded-md p-5 shadow-lg sm:rounded-md sm:p-1",children:[a.jsx(Q,{className:"h-10 w-10 sm:h-8 sm:w-8"}),a.jsx("span",{children:"Reportar mascota perdida"})]})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx(j,{}),t.map((n,s)=>a.jsxs(L.Fragment,{children:[a.jsxs("div",{className:"grid items-center gap-4 px-4 py-5 md:grid-cols-6",children:[a.jsxs("div",{className:"order-2 flex items-center gap-2 md:order-none md:col-span-2",children:[a.jsx("span",{className:"flex mr-2 h-20 w-22 shrink-0 items-center justify-center rounded-md bg-muted",children:n.image?a.jsx("img",{src:E.storage.from("pets-portraits").getPublicUrl(n.image).data.publicUrl,alt:n.name??"Mascota perdida",loading:"lazy",className:"h-full w-full rounded-md object-cover"}):a.jsx(F,{className:"h-9 w-9 text-muted-foreground"})}),a.jsxs("div",{className:"flex flex-col w-full ",children:[a.jsx("h3",{className:"text-[18px] font-semibold",children:n.name}),a.jsx("span",{className:"text-[15px] text-muted-foreground",children:K(n.species)}),a.jsx("span",{className:"text-[15px] font-semibold  text-red-400",children:n.created_at})]})]}),a.jsxs("div",{className:"flex flex-row items-center gap-4 md:order-none md:col-span-3",children:[a.jsx(V,{}),a.jsx("p",{className:"order-1 text-2xl font-semibold md:order-none md:col-span-2 line-clamp-2",children:n.last_seen_address})]}),a.jsxs(T,{variant:"outline",onClick:()=>r(`${_.petDetails}/${n.petId}`),className:"order-3 ml-auto w-fit gap-2 md:order-none",children:[a.jsx("span",{children:"Ver mÃ¡s"}),a.jsx(J,{className:"h-4 w-4"})]})]}),a.jsx(j,{})]},s))]})]})})},X=()=>{const e=C();return a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[a.jsx(F,{className:"h-16 w-16 mb-4"}),a.jsx("p",{className:"text-lg font-semibold ",children:"No hay mascotas perdidas"}),a.jsx("p",{className:"text-sm text-muted-foreground w-5/6",children:"Parece que no hay reportes de mascotas perdidas en este momento."}),a.jsx(T,{variant:"destructive",onClick:()=>e(_.reportLostPet),className:"mt-6 mb-30 bg-red-700 text-white ",children:"Reportar una mascota perdida"})]})},ee=()=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx(j,{}),Array(3).fill(null).map((e,t)=>a.jsxs(L.Fragment,{children:[a.jsxs("div",{className:"grid items-center gap-4 px-4 py-5 md:grid-cols-6",children:[a.jsxs("div",{className:"order-2 flex items-center gap-2 md:order-none md:col-span-2",children:[a.jsx("span",{className:"flex mr-2 h-20 w-22 shrink-0 items-center justify-center rounded-md bg-muted",children:a.jsx(w,{className:"h-full w-full rounded-md"})}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsx(w,{className:"h-5 w-3/4 mb-2"}),a.jsx(w,{className:"h-4 w-1/2 mb-1"}),a.jsx(w,{className:"h-4 w-1/3"})]})]}),a.jsxs("div",{className:"flex flex-row items-center gap-4 md:order-none md:col-span-3",children:[a.jsx(w,{className:"h-6 w-6"}),a.jsx(w,{className:"h-5 w-full"})]}),a.jsx("div",{className:"order-3 ml-auto w-fit gap-2 md:order-none",children:a.jsx(w,{className:"h-8 w-20 rounded-md"})})]}),a.jsx(j,{})]},t))]});var U=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function te(e){const t=e.match(U);if(t){const r=Number(t[2]);if(r<1||r>12)return!1;if(typeof t[3]!==void 0){const n=Number(t[3]);if(n<1||n>31)return!1}if(typeof t[4]!==void 0){const n=Number(t[4]);if(n<0||n>23)return!1}return!0}return!1}function se(e){const t=e.match(U);return t&&typeof t[4]>"u"?e+="T00:00:00":e}function v(e){if(e||(e=new Date),e instanceof Date){const t=new Date(e);return t.setMilliseconds(0),t}if(e=e.trim(),te(e))return new Date(se(e));throw new Error(`Non ISO 8601 compliant date (${e}).`)}var Z="1999-03-04T02:05:01.000Z",b=new Map,A=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],Y=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],R=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]];function re(e){if(/^[+-]\d{2}:\d{2}/.test(e))return 6;if(/^[+-]\d{4}/.test(e))return 5;throw new Error("Invalid offset format")}var ne=["MMMM","MMM","dddd","ddd"],h=new Map([...A,...Y,...R].map(e=>[e[0],e])),S=new Map,ae=["full","long","medium","short"];function x(e){return e.type==="literal"&&(e.value=e.value.normalize("NFKC")),e}function oe(e,t,r,n=!1,s=null){const i=ie(e,t,r,n),c=v(e);function m({partName:d,partValue:p,token:o}){if(d==="literal")return p;const l=i[d];if(d==="hour"&&o==="H")return l.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(o)&&l.length===1)return`0${l}`;if(d==="dayPeriod"){const f=me(c.getUTCHours()<12?"am":"pm",r);return o==="A"?f.toUpperCase():f.toLowerCase()}return d==="timeZoneName"?s??H(-1*c.getTimezoneOffset(),o):l}return t.map(d=>({...d,value:m(d)}))}function ie(e,t,r,n=!1){const s=v(e),i=t.filter(o=>o.hour12),c=t.filter(o=>!o.hour12),m=[],d=[];function p(o,l=!1){const f=`${r}-u-hc-${l?"h12":"h23"}`;if(m.push(...new Intl.DateTimeFormat(f,o.reduce((u,g)=>g.partName==="literal"?u:(n&&ne.includes(g.token)&&d.push(g),Object.assign(u,g.option)),{timeZone:"UTC"})).formatToParts(s).map(x)),n&&d.length)for(const u of d){let g=[];switch(u.token){case"MMMM":g=new Intl.DateTimeFormat(f,{dateStyle:"long",timeZone:"UTC"}).formatToParts(s).map(x);break;case"MMM":g=new Intl.DateTimeFormat(f,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(s).map(x);break}const y=g.find(M=>M.type===u.partName),$=m.findIndex(M=>M.type===u.partName);y&&$>-1&&(m[$]=y)}}return i.length&&p(i,!0),c.length&&p(c),m.reduce((o,l)=>(o[l.type]=l.value,o),{})}function H(e,t="Z"){const r=String(Math.floor(Math.abs(e/60))).padStart(2,"0"),n=String(Math.abs(e%60)).padStart(2,"0"),s=e<0?"-":"+";return t==="ZZ"?`${s}${r}${n}`:`${s}${r}:${n}`}function ce(e,t){de(e,t);const[r,n,s,i]=e.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),c=Number(s)*60+Number(i);return n==="+"?c:-c}function de(e,t="Z"){if(!(n=>{switch(n){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(e);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(e)}})(t))throw new Error(`Invalid offset: ${e}`);return e}function le(e){return typeof e=="string"?e.includes("ZZ")?"ZZ":"Z":"time"in e&&e.time==="full"?"Z":"ZZ"}function me(e,t){const r=S.get(t);if(r&&r[e])return r[e];const n=new Date(Z);n.setUTCHours(e==="am"?5:20);const i=new Intl.DateTimeFormat(t,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(n).map(x).find(c=>c.type==="dayPeriod");if(i){const c=r||{};return S.set(t,Object.assign(c,{[e]:i.value})),i.value}return e}function ue(e,t="+00:00"){const r=v(e),n=(()=>{switch(re(t)){case 5:return"ZZ";case 6:return"Z"}})(),s=ce(t,n);return new Date(r.getTime()+s*1e3*60)}function z(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function P(e,t){const r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hourCycle:"h23"}).formatToParts(e).map(x),n={};return r.forEach(s=>{n[s.type]=s.value}),new Date(`${n.year}-${n.month}-${n.day}T${n.hour}:${n.minute}:${n.second}Z`)}function k(e,t="UTC",r="device",n="Z"){var s;r=r==="device"?(s=z())!=null?s:"utc":r;const i=v(e),c=P(i,t),m=P(i,r),d=Math.round((m.getTime()-c.getTime())/1e3/60);return H(d,n)}function fe(e,t){if(ae.includes(e)||typeof e=="object")return he(e,t);let r=e,n=0;const s=o=>{if(o[2]||(o[2]=new RegExp(`(.)?(${o[0]})`,"g")),o[2].test(r)){let l=0;return r=r.replace(o[2],(f,u,g)=>u==="\\"?g:`${typeof u=="string"?u:""}{!${l++?n:n++}!}`),!!l}return!1};function i(o){const l=o.map(u=>u.partName),f=new Set(l);if(l.length>f.size)throw new Error("Cannot reuse format tokens.");return o}function c(o,[l,f,u]){const g=Object.keys(f)[0],y=f[g];return{option:f,partName:g,partValue:y,token:l,pattern:u,hour12:o}}const m=A.filter(s).concat(Y.filter(s)).map(c.bind(null,!1)),d=i(m.concat(R.filter(s).map(c.bind(null,!0)))),p=/^\{!(\d+)!\}$/;return r.split(/(\{!\d+!\})/).map(o=>{const l=o.match(p);return l?d[Number(l[1])]:{option:{literal:o},partName:"literal",partValue:o,token:o,pattern:new RegExp(""),hour12:!1}}).filter(o=>!(o.partName==="literal"&&o.partValue===""))}function he(e,t){const r={timeZone:"UTC"};typeof e=="string"?r.dateStyle=e:("date"in e&&(r.dateStyle=e.date),"time"in e&&(r.timeStyle=e.time));const n=new Intl.DateTimeFormat(t,r),s=n.formatToParts(new Date(Z)).map(x),c=n.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(x).find(d=>d.type==="hour"),m=c&&c.value==="23"?24:12;return s.map(d=>{const p=d.type,o=pe(d.type,d.value,t,d.type==="hour"?m:void 0,r);if(o===void 0)return;const l=o[1][p];if(l)return o[2]||(o[2]=new RegExp(`${o[0]}`,"g")),{option:{[p]:l},partName:p,partValue:l,token:o[0],pattern:o[2],hour12:m===12}}).filter(d=>!!d)}function pe(e,t,r,n,s){const i=t.length,c=!isNaN(Number(t));let m;switch(e){case"year":return i===2?h.get("YY"):h.get("YYYY");case"month":if(c)return i===1?h.get("M"):h.get("MM");switch(m=D(r,e,t),m){case"long":return h.get("MMMM");default:return h.get("MMM")}case"day":return i===1?h.get("D"):h.get("DD");case"weekday":switch(m=D(r,e,t),m){case"narrow":return h.get("d");case"short":return h.get("ddd");default:return h.get("dddd")}case"hour":return n===12?i===1?h.get("h"):h.get("hh"):i===1?h.get("H"):h.get("HH");case"minute":return i===1?h.get("m"):h.get("mm");case"second":return i===1?h.get("s"):h.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(t)?h.get("A"):h.get("a");case"literal":return[t,{literal:t},new RegExp("")];case"timeZoneName":return s.timeStyle==="full"?h.get("Z"):h.get("ZZ");default:return}}function D(e,t,r){if(!b.has(e)){const s=new Date(Z),i=[3,8,9,7,6,4,3],c=["weekday","month","dayPeriod"],m=["long","short","narrow"],d={};for(let p=0;p<12;p++){s.setMonth(0+p),p in i&&s.setDate(i[p]),s.setUTCHours(8+p);for(const o of m){const l=new Intl.DateTimeFormat(e,c.reduce((f,u)=>Object.assign(f,{[u]:o}),{hour12:!0,timeZone:"UTC"})).formatToParts(s).map(x);if(o==="long"||o==="short"){const u=new Intl.DateTimeFormat(e,{dateStyle:o==="short"?"medium":"long",timeZone:"UTC"}).formatToParts(s).map(x).find(y=>y.type==="month"),g=l.findIndex(y=>y.type==="month");g>-1&&u&&(l[g]=u)}l.forEach(f=>{if(f.type==="literal")return;const u=f.type;d[u]=Object.assign(d[u]||{},{[f.value]:o})})}}b.set(e,d)}const n=b.get(e);return n?n[t][r]:void 0}function ge(e,t="+00:00"){const r=t.slice(0,1)==="+";return ue(e,t.replace(r?"+":"-",r?"-":"+"))}function xe(){return Intl.DateTimeFormat().resolvedOptions().locale}function I(e,t="long",r="device",n=!1,s){let i,c;return typeof e=="object"&&!(e instanceof Date)&&({date:e,format:t,locale:r,genitive:n,partFilter:s,tz:i}=e),t==="ISO8601"?v(e).toISOString():(i&&(c=k(e,"utc",i,le(t))),i??(i=z()),(i==null?void 0:i.toLowerCase())!=="utc"&&(e=ge(e,k(e,i,"utc"))),(!r||r==="device")&&(r=xe()),oe(e,fe(t,r).filter(s??(()=>!0)),r,n,c).map(m=>m.value).join(""))}const ye=async()=>{const e=E.from("lost_pet_report").select(`
        id,
        created_at,
        last_seen_date,
        found_date,
        last_seen_address,
        contact_number,
        pet (
          id,
          name,
          image,
          owner,
          sex,
          animal_type,
          breed,
          spayed_or_neutered,
          notes,
          birth_date
        )
      `).is("found_date",null).order("created_at",{ascending:!1}),{data:t,error:r}=await e;return console.log("Lost pets data:",t),r?(console.error("Error fetching lost pets:",r.message),[]):t?t.map(s=>{var i,c,m,d,p,o,l,f,u;return{id:s.id,created_at:I(new Date(s.created_at),"long","es"),last_seen_date:s.last_seen_date,found_date:s.found_date?I(new Date(s.found_date),"long","es"):null,last_seen_address:s.last_seen_address,contact_number:s.contact_number,petId:(i=s.pet)==null?void 0:i.id,name:((c=s.pet)==null?void 0:c.name)??"",image:((m=s.pet)==null?void 0:m.image)??"",owner:((d=s.pet)==null?void 0:d.owner)??"",sex:((p=s.pet)==null?void 0:p.sex)??"",species:((o=s.pet)==null?void 0:o.animal_type)??"",breed:((l=s.pet)==null?void 0:l.breed)??"",spayed_or_neutered:((f=s.pet)==null?void 0:f.spayed_or_neutered)??!1,notes:s.pet.notes,age:(u=s.pet)!=null&&u.birth_date?we(s.pet.birth_date):null}}):[]},we=e=>{const t=new Date,r=new Date(e),n=t.getTime()-r.getTime(),s=Math.floor(n/(1e3*60*60*24));return s<30?`${s} dias`:s<365?Math.floor(s/30)===1?`${Math.floor(s/30)} mes`:`${Math.floor(s/30)} meses`:`${Math.floor(s/365)} aÃ±os`},ve=({heading:e="Mascotas Perdidas"})=>{const[t,r]=N.useState([]),[n,s]=N.useState(!0);return N.useEffect(()=>{(async()=>{try{const c=await ye();r(c),s(!1)}catch(c){console.error("Error fetching lost pets:",c)}})()},[]),a.jsxs(a.Fragment,{children:[a.jsx(B,{}),n&&a.jsx("section",{className:"py-8",children:a.jsxs("div",{className:"container mx-auto",children:[a.jsx("h1",{className:"text-center md:text-start mb-8 px-4 text-3xl font-semibold md:text-4xl",children:e}),a.jsx(ee,{})]})}),!n&&t.length===0&&a.jsx(X,{}),!n&&t.length>0&&a.jsx(W,{heading:e,lostPets:t})]})},Ee=()=>[{title:"Mascotas perdidas"}],je=()=>a.jsx(ve,{}),Fe=q(je);export{Fe as default,Ee as meta};
