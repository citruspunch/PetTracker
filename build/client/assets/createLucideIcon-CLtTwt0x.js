const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-CbCnEUUr.js","assets/chunk-LSOULM7L-DOIZURii.js"])))=>i.map(i=>d[i]);
var hc=Object.defineProperty;var fc=(n,e,t)=>e in n?hc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Wo=(n,e,t)=>fc(n,typeof e!="symbol"?e+"":e,t);import{D as dc,C as pc,E as St,a as dt}from"./chunk-LSOULM7L-DOIZURii.js";const yc="modulepreload",vc=function(n){return"/"+n},Xo={},tt=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));i=c(t.map(p=>{if(p=vc(p),p in Xo)return;Xo[p]=!0;const y=p.endsWith(".css"),k=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${k}`))return;const E=document.createElement("link");if(E.rel=y?"stylesheet":yc,y||(E.as="script"),E.crossOrigin="",E.href=p,f&&E.setAttribute("nonce",f),document.head.appendChild(E),y)return new Promise((S,T)=>{E.addEventListener("load",S),E.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return i.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},mc=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>tt(async()=>{const{default:r}=await Promise.resolve().then(()=>nt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Jn extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class _c extends Jn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gc extends Jn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bc extends Jn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Dn;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Dn||(Dn={}));var wc=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};class kc{constructor(e,{headers:t={},customFetch:r,region:i=Dn.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=mc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return wc(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:c}=t;let h={},{region:f}=t;f||(f=this.region),f&&f!=="any"&&(h["x-region"]=f);let p;c&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",p=c):typeof c=="string"?(h["Content-Type"]="text/plain",p=c):typeof FormData<"u"&&c instanceof FormData?p=c:(h["Content-Type"]="application/json",p=JSON.stringify(c)));const y=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),i),body:p}).catch(T=>{throw new _c(T)}),k=y.headers.get("x-relay-error");if(k&&k==="true")throw new gc(y);if(!y.ok)throw new bc(y);let E=((r=y.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),S;return E==="application/json"?S=yield y.json():E==="application/octet-stream"?S=yield y.blob():E==="text/event-stream"?S=y:E==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null}}catch(i){return{data:null,error:i}}})}}var re={},Be={},Ve={},He={},Je={},Ke={},xc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rt=xc();const Ec=rt.fetch,Yu=rt.fetch.bind(rt),el=rt.Headers,Sc=rt.Request,Ac=rt.Response,nt=Object.freeze(Object.defineProperty({__proto__:null,Headers:el,Request:Sc,Response:Ac,default:Yu,fetch:Ec},Symbol.toStringTag,{value:"Module"})),Pc=dc(nt);var At={},Qo;function tl(){if(Qo)return At;Qo=1,Object.defineProperty(At,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return At.default=n,At}var Zo;function rl(){if(Zo)return Ke;Zo=1;var n=Ke&&Ke.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ke,"__esModule",{value:!0});const e=n(Pc),t=n(tl());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,c){return this.headers=Object.assign({},this.headers),this.headers[o]=c,this}then(o,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let f=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var y,k,E;let S=null,T=null,L=null,q=p.status,H=p.statusText;if(p.ok){if(this.method!=="HEAD"){const J=await p.text();J===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?T=J:T=JSON.parse(J))}const K=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),V=(k=p.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");K&&V&&V.length>1&&(L=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(S={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,L=null,q=406,H="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const K=await p.text();try{S=JSON.parse(K),Array.isArray(S)&&p.status===404&&(T=[],S=null,q=200,H="OK")}catch{p.status===404&&K===""?(q=204,H="No Content"):S={message:K}}if(S&&this.isMaybeSingle&&(!((E=S==null?void 0:S.details)===null||E===void 0)&&E.includes("0 rows"))&&(S=null,q=200,H="OK"),S&&this.shouldThrowOnError)throw new t.default(S)}return{error:S,data:T,count:L,status:q,statusText:H}});return this.shouldThrowOnError||(f=f.catch(p=>{var y,k,E;return{error:{message:`${(y=p==null?void 0:p.name)!==null&&y!==void 0?y:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(k=p==null?void 0:p.stack)!==null&&k!==void 0?k:""}`,hint:"",code:`${(E=p==null?void 0:p.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,c)}returns(){return this}overrideTypes(){return this}}return Ke.default=r,Ke}var Yo;function nl(){if(Yo)return Je;Yo=1;var n=Je&&Je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});const e=n(rl());class t extends e.default{select(i){let o=!1;const c=(i??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:o=!0,nullsFirst:c,foreignTable:h,referencedTable:f=h}={}){const p=f?`${f}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${i}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:c=o}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${i}`),this}range(i,o,{foreignTable:c,referencedTable:h=c}={}){const f=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(p,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:o=!1,settings:c=!1,buffers:h=!1,wal:f=!1,format:p="text"}={}){var y;const k=[i?"analyze":null,o?"verbose":null,c?"settings":null,h?"buffers":null,f?"wal":null].filter(Boolean).join("|"),E=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${E}"; options=${k};`,p==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Je.default=t,Je}var ea;function Kn(){if(ea)return He;ea=1;var n=He&&He.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(He,"__esModule",{value:!0});const e=n(nl());class t extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const c=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(i,`in.(${c})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:c,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const p=c===void 0?"":`(${c})`;return this.url.searchParams.append(i,`${f}fts${p}.${o}`),this}match(i){return Object.entries(i).forEach(([o,c])=>{this.url.searchParams.append(o,`eq.${c}`)}),this}not(i,o,c){return this.url.searchParams.append(i,`not.${o}.${c}`),this}or(i,{foreignTable:o,referencedTable:c=o}={}){const h=c?`${c}.or`:"or";return this.url.searchParams.append(h,`(${i})`),this}filter(i,o,c){return this.url.searchParams.append(i,`${o}.${c}`),this}}return He.default=t,He}var ta;function sl(){if(ta)return Ve;ta=1;var n=Ve&&Ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});const e=n(Kn());class t{constructor(i,{headers:o={},schema:c,fetch:h}){this.url=i,this.headers=o,this.schema=c,this.fetch=h}select(i,{head:o=!1,count:c}={}){const h=o?"HEAD":"GET";let f=!1;const p=(i??"*").split("").map(y=>/\s/.test(y)&&!f?"":(y==='"'&&(f=!f),y)).join("");return this.url.searchParams.set("select",p),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:o,defaultToNull:c=!0}={}){const h="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),o&&f.push(`count=${o}`),c||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const p=i.reduce((y,k)=>y.concat(Object.keys(k)),[]);if(p.length>0){const y=[...new Set(p)].map(k=>`"${k}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:o,ignoreDuplicates:c=!1,count:h,defaultToNull:f=!0}={}){const p="POST",y=[`resolution=${c?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&y.push(this.headers.Prefer),h&&y.push(`count=${h}`),f||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(i)){const k=i.reduce((E,S)=>E.concat(Object.keys(S)),[]);if(k.length>0){const E=[...new Set(k)].map(S=>`"${S}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:o}={}){const c="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),this.headers.Prefer=h.join(","),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const o="DELETE",c=[];return i&&c.push(`count=${i}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ve.default=t,Ve}var lt={},ct={},ra;function Tc(){return ra||(ra=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.version=void 0,ct.version="0.0.0-automated"),ct}var na;function Rc(){if(na)return lt;na=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.DEFAULT_HEADERS=void 0;const n=Tc();return lt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},lt}var sa;function Oc(){if(sa)return Be;sa=1;var n=Be&&Be.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Be,"__esModule",{value:!0});const e=n(sl()),t=n(Kn()),r=Rc();class i{constructor(c,{headers:h={},schema:f,fetch:p}={}){this.url=c,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),h),this.schemaName=f,this.fetch=p}from(c){const h=new URL(`${this.url}/${c}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new i(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:f=!1,get:p=!1,count:y}={}){let k;const E=new URL(`${this.url}/rpc/${c}`);let S;f||p?(k=f?"HEAD":"GET",Object.entries(h).filter(([L,q])=>q!==void 0).map(([L,q])=>[L,Array.isArray(q)?`{${q.join(",")}}`:`${q}`]).forEach(([L,q])=>{E.searchParams.append(L,q)})):(k="POST",S=h);const T=Object.assign({},this.headers);return y&&(T.Prefer=`count=${y}`),new t.default({method:k,url:E,headers:T,schema:this.schemaName,body:S,fetch:this.fetch,allowEmpty:!1})}}return Be.default=i,Be}var ia;function jc(){if(ia)return re;ia=1;var n=re&&re.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(re,"__esModule",{value:!0}),re.PostgrestError=re.PostgrestBuilder=re.PostgrestTransformBuilder=re.PostgrestFilterBuilder=re.PostgrestQueryBuilder=re.PostgrestClient=void 0;const e=n(Oc());re.PostgrestClient=e.default;const t=n(sl());re.PostgrestQueryBuilder=t.default;const r=n(Kn());re.PostgrestFilterBuilder=r.default;const i=n(nl());re.PostgrestTransformBuilder=i.default;const o=n(rl());re.PostgrestBuilder=o.default;const c=n(tl());return re.PostgrestError=c.default,re.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:c.default},re}var Ic=jc();const Cc=pc(Ic),{PostgrestClient:$c,PostgrestQueryBuilder:Sp,PostgrestFilterBuilder:Ap,PostgrestTransformBuilder:Pp,PostgrestBuilder:Tp,PostgrestError:Rp}=Cc,qc="2.11.2",Dc={"X-Client-Info":`realtime-js/${qc}`},Lc="1.0.0",il=1e4,Mc=1e3;var et;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(et||(et={}));var pe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(pe||(pe={}));var be;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(be||(be={}));var Ln;(function(n){n.websocket="websocket"})(Ln||(Ln={}));var ze;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ze||(ze={}));class Uc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),o=t.getUint8(2);let c=this.HEADER_LENGTH+2;const h=r.decode(e.slice(c,c+i));c=c+i;const f=r.decode(e.slice(c,c+o));c=c+o;const p=JSON.parse(r.decode(e.slice(c,e.byteLength)));return{ref:null,topic:h,event:f,payload:p}}}class ol{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(X||(X={}));const oa=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,c)=>(o[c]=zc(c,n,e,i),o),{})},zc=(n,e,t,r)=>{const i=e.find(h=>h.name===n),o=i==null?void 0:i.type,c=t[n];return o&&!r.includes(o)?al(o,c):Mn(c)},al=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Bc(e,t)}switch(n){case X.bool:return Nc(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return Gc(e);case X.json:case X.jsonb:return Fc(e);case X.timestamp:return Vc(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return Mn(e);default:return Mn(e)}},Mn=n=>n,Nc=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Gc=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Fc=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Bc=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const c=n.slice(1,t);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(h=>al(e,h))}return n},Vc=n=>typeof n=="string"?n.replace(" ","T"):n,ul=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class tr{constructor(e,t,r={},i=il){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var aa;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(aa||(aa={}));class pt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pt.syncState(this.state,i,o,c),this.pendingDiffs.forEach(f=>{this.state=pt.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=pt.syncDiff(this.state,i,o,c),h())}),this.onJoin((i,o,c)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:c})}),this.onLeave((i,o,c)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const o=this.cloneDeep(e),c=this.transformState(t),h={},f={};return this.map(o,(p,y)=>{c[p]||(f[p]=y)}),this.map(c,(p,y)=>{const k=o[p];if(k){const E=y.map(q=>q.presence_ref),S=k.map(q=>q.presence_ref),T=y.filter(q=>S.indexOf(q.presence_ref)<0),L=k.filter(q=>E.indexOf(q.presence_ref)<0);T.length>0&&(h[p]=T),L.length>0&&(f[p]=L)}else h[p]=y}),this.syncDiff(o,{joins:h,leaves:f},r,i)}static syncDiff(e,t,r,i){const{joins:o,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(h,f)=>{var p;const y=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(f),y.length>0){const k=e[h].map(S=>S.presence_ref),E=y.filter(S=>k.indexOf(S.presence_ref)<0);e[h].unshift(...E)}r(h,y,f)}),this.map(c,(h,f)=>{let p=e[h];if(!p)return;const y=f.map(k=>k.presence_ref);p=p.filter(k=>y.indexOf(k.presence_ref)<0),e[h]=p,i(h,p,f),p.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ua;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ua||(ua={}));var la;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(la||(la={}));var Pe;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Pe||(Pe={}));class Wn{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tr(this,be.join,this.params,this.timeout),this.rejoinTimer=new ol(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(be.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new pt(this),this.broadcastEndpointURL=ul(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:c,private:h}}=this.params;this._onError(y=>e==null?void 0:e(Pe.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Pe.CLOSED));const f={},p={broadcast:o,presence:c,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var k;if(this.socket.setAuth(),y===void 0){e==null||e(Pe.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,S=(k=E==null?void 0:E.length)!==null&&k!==void 0?k:0,T=[];for(let L=0;L<S;L++){const q=E[L],{filter:{event:H,schema:Q,table:K,filter:V}}=q,J=y&&y[L];if(J&&J.event===H&&J.schema===Q&&J.table===K&&J.filter===V)T.push(Object.assign(Object.assign({},q),{id:J.id}));else{this.unsubscribe(),e==null||e(Pe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Pe.SUBSCRIBED);return}}).receive("error",y=>{e==null||e(Pe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Pe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,h,f;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(be.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new tr(this,be.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new tr(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,o;const c=e.toLocaleLowerCase(),{close:h,error:f,leave:p,join:y}=be;if(r&&[h,f,p,y].indexOf(c)>=0&&r!==this._joinRef())return;let E=this._onMessage(c,t,r);if(t&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(S=>{var T,L,q;return((T=S.filter)===null||T===void 0?void 0:T.event)==="*"||((q=(L=S.filter)===null||L===void 0?void 0:L.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===c}).map(S=>S.callback(E,r)):(o=this.bindings[c])===null||o===void 0||o.filter(S=>{var T,L,q,H,Q,K;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in S){const V=S.id,J=(T=S.filter)===null||T===void 0?void 0:T.event;return V&&((L=t.ids)===null||L===void 0?void 0:L.includes(V))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((q=t.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const V=(Q=(H=S==null?void 0:S.filter)===null||H===void 0?void 0:H.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase();return V==="*"||V===((K=t==null?void 0:t.event)===null||K===void 0?void 0:K.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===c}).map(S=>{if(typeof E=="object"&&"ids"in E){const T=E.data,{schema:L,table:q,commit_timestamp:H,type:Q,errors:K}=T;E=Object.assign(Object.assign({},{schema:L,table:q,commit_timestamp:H,eventType:Q,new:{},old:{},errors:K}),this._getPayloadRecords(T))}S.callback(E,r)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Wn.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(be.close,{},e)}_onError(e){this._on(be.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=oa(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=oa(e.columns,e.old_record)),t}}const Hc=()=>{},Jc=typeof WebSocket<"u",Kc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Wc{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Dc,this.params={},this.timeout=il,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Hc,this.conn=null,this.sendBuffer=[],this.serializer=new Uc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...h)=>tt(async()=>{const{default:f}=await Promise.resolve().then(()=>nt);return{default:f}},void 0).then(({default:f})=>f(...h)):c=fetch,(...h)=>c(...h)},this.endPoint=`${e}/${Ln.websocket}`,this.httpEndpoint=ul(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(o,c)=>c(JSON.stringify(o)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ol(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Jc){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Xc(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),tt(async()=>{const{default:e}=await import("./browser-CbCnEUUr.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Lc}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case et.connecting:return ze.Connecting;case et.open:return ze.Open;case et.closing:return ze.Closing;default:return ze.Closed}}isConnected(){return this.connectionState()===ze.Open}channel(e,t={config:{}}){const r=new Wn(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:o}=e,c=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${t} ${r} (${o})`,i),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(be.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Mc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:o,ref:c}=t;c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${c&&"("+c+")"||""}`,o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,c)),this.stateChangeCallbacks.message.forEach(h=>h(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(be.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Kc],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class Xc{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=et.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Xn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ie(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Qc extends Xn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Un extends Xn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Zc=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};const ll=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>tt(async()=>{const{default:r}=await Promise.resolve().then(()=>nt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Yc=()=>Zc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield tt(()=>Promise.resolve().then(()=>nt),void 0)).Response:Response}),zn=n=>{if(Array.isArray(n))return n.map(t=>zn(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=zn(r)}),e};var Ne=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};const rr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),eh=(n,e,t)=>Ne(void 0,void 0,void 0,function*(){const r=yield Yc();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new Qc(rr(i),n.status||500))}).catch(i=>{e(new Un(rr(i),i))}):e(new Un(rr(n),n))}),th=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function _t(n,e,t,r,i,o){return Ne(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(t,th(e,r,i,o)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>eh(f,h,r))})})}function Ct(n,e,t,r){return Ne(this,void 0,void 0,function*(){return _t(n,"GET",e,t,r)})}function Ie(n,e,t,r,i){return Ne(this,void 0,void 0,function*(){return _t(n,"POST",e,r,i,t)})}function rh(n,e,t,r,i){return Ne(this,void 0,void 0,function*(){return _t(n,"PUT",e,r,i,t)})}function nh(n,e,t,r){return Ne(this,void 0,void 0,function*(){return _t(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function cl(n,e,t,r,i){return Ne(this,void 0,void 0,function*(){return _t(n,"DELETE",e,r,i,t)})}var fe=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};const sh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ca={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ih{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ll(i)}uploadOrUpdate(e,t,r,i){return fe(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},ca),i);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),i!=null&&i.headers&&(h=Object.assign(Object.assign({},h),i.headers));const p=this._removeEmptyFolders(t),y=this._getFinalPath(p),k=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:e,body:o,headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{})),E=yield k.json();return k.ok?{data:{path:p,id:E.Id,fullPath:E.Key},error:null}:{data:null,error:E}}catch(o){if(ie(o))return{data:null,error:o};throw o}})}upload(e,t,r){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return fe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",t);try{let f;const p=Object.assign({upsert:ca.upsert},i),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",p.cacheControl)):(f=r,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const k=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:y}),E=yield k.json();return k.ok?{data:{path:o,fullPath:E.Key},error:null}:{data:null,error:E}}catch(f){if(ie(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const o=yield Ie(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),c=new URL(this.url+o.url),h=c.searchParams.get("token");if(!h)throw new Xn("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}update(e,t,r){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return fe(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}copy(e,t,r){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Ie(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return fe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Ie(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return fe(this,void 0,void 0,function*(){try{const i=yield Ie(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}download(e,t){return fe(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=o?`?${o}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Ct(this.fetch,`${this.url}/${i}/${h}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(ie(h))return{data:null,error:h};throw h}})}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ct(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:zn(r),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield nh(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ie(r)&&r instanceof Un){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const h=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});f!==""&&i.push(f);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${p}`)}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield cl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}list(e,t,r){return fe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},sh),t),{prefix:e||""});return{data:yield Ie(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const oh="2.7.1",ah={"X-Client-Info":`storage-js/${oh}`};var We=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};class uh{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ah),t),this.fetch=ll(r)}listBuckets(){return We(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ie(e))return{data:null,error:e};throw e}})}getBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return We(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return We(this,void 0,void 0,function*(){try{return{data:yield rh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}emptyBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}deleteBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield cl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}}class lh extends uh{constructor(e,t={},r){super(e,t,r)}from(e){return new ih(this.url,this.headers,e,this.fetch)}}const ch="2.49.4";let ft="";typeof Deno<"u"?ft="deno":typeof document<"u"?ft="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ft="react-native":ft="node";const hh={"X-Client-Info":`supabase-js-${ft}/${ch}`},fh={headers:hh},dh={schema:"public"},ph={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yh={};var vh=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};const mh=n=>{let e;return n?e=n:typeof fetch>"u"?e=Yu:e=fetch,(...t)=>e(...t)},_h=()=>typeof Headers>"u"?el:Headers,gh=(n,e,t)=>{const r=mh(t),i=_h();return(o,c)=>vh(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:n;let p=new i(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),r(o,Object.assign(Object.assign({},c),{headers:p}))})};var bh=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};function wh(n){return n.replace(/\/$/,"")}function kh(n,e){const{db:t,auth:r,realtime:i,global:o}=n,{db:c,auth:h,realtime:f,global:p}=e,y={db:Object.assign(Object.assign({},c),t),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},f),i),global:Object.assign(Object.assign({},p),o),accessToken:()=>bh(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}const hl="2.69.1",Ye=30*1e3,Nn=3,nr=Nn*Ye,xh="http://localhost:9999",Eh="supabase.auth.token",Sh={"X-Client-Info":`gotrue-js/${hl}`},Gn="X-Supabase-Api-Version",fl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ah=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ph=6e5;class Qn extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function G(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Th extends Qn{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Rh(n){return G(n)&&n.name==="AuthApiError"}class dl extends Qn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class $e extends Qn{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Oe extends $e{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Oh(n){return G(n)&&n.name==="AuthSessionMissingError"}class sr extends $e{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pt extends $e{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tt extends $e{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jh(n){return G(n)&&n.name==="AuthImplicitGrantRedirectError"}class ha extends $e{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fn extends $e{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ir(n){return G(n)&&n.name==="AuthRetryableFetchError"}class fa extends $e{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class yt extends $e{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pa=` 	
\r=`.split(""),Ih=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<pa.length;e+=1)n[pa[e].charCodeAt(0)]=-2;for(let e=0;e<da.length;e+=1)n[da[e].charCodeAt(0)]=e;return n})();function pl(n,e,t){const r=Ih[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ya(n){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=c=>{qh(c,r,t)};for(let c=0;c<n.length;c+=1)pl(n.charCodeAt(c),i,o);return e.join("")}function Ch(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function $h(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Ch(r,e)}}function qh(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Dh(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)pl(n.charCodeAt(i),t,r);return new Uint8Array(e)}function Lh(n){const e=[];return $h(n,t=>e.push(t)),new Uint8Array(e)}function Mh(n){return Math.round(Date.now()/1e3)+n}function Uh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const xe=()=>typeof window<"u"&&typeof document<"u",Le={tested:!1,writable:!1},vt=()=>{if(!xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Le.tested)return Le.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Le.tested=!0,Le.writable=!0}catch{Le.tested=!0,Le.writable=!1}return Le.writable};function zh(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const yl=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>tt(async()=>{const{default:r}=await Promise.resolve().then(()=>nt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Nh=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",vl=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Rt=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ot=async(n,e)=>{await n.removeItem(e)};class $t{constructor(){this.promise=new $t.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}$t.promiseConstructor=Promise;function or(n){const e=n.split(".");if(e.length!==3)throw new yt("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Ah.test(e[r]))throw new yt("JWT not in base64url format");return{header:JSON.parse(ya(e[0])),payload:JSON.parse(ya(e[1])),signature:Dh(e[2]),raw:{header:e[0],payload:e[1]}}}async function Gh(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Fh(n,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await n(o);if(!e(o,null,c)){r(c);return}}catch(c){if(!e(o,c)){i(c);return}}})()})}function Bh(n){return("0"+n.toString(16)).substr(-2)}function Vh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Bh).join("")}async function Hh(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function Jh(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Hh(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xe(n,e,t=!1){const r=Vh();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await vl(n,`${e}-code-verifier`,i);const o=await Jh(r);return[o,r===o?"plain":"s256"]}const Kh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wh(n){const e=n.headers.get(Gn);if(!e||!e.match(Kh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Xh(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Qh(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Zh=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Ue=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Yh=[502,503,504];async function va(n){var e;if(!Nh(n))throw new Fn(Ue(n),0);if(Yh.includes(n.status))throw new Fn(Ue(n),n.status);let t;try{t=await n.json()}catch(o){throw new dl(Ue(o),o)}let r;const i=Wh(n);if(i&&i.getTime()>=fl["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new fa(Ue(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Oe}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new fa(Ue(t),n.status,t.weak_password.reasons);throw new Th(Ue(t),n.status||500,r)}const ef=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function B(n,e,t,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Gn]||(o[Gn]=fl["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await tf(n,e,t+h,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function tf(n,e,t,r,i,o){const c=ef(e,r,i,o);let h;try{h=await n(t,Object.assign({},c))}catch(f){throw console.error(f),new Fn(Ue(f),0)}if(h.ok||await va(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(f){await va(f)}}function je(n){var e;let t=null;of(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Mh(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ma(n){const e=je(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ce(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function rf(n){return{data:n,error:null}}function nf(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=n,c=Zh(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},c);return{data:{properties:h,user:f},error:null}}function sf(n){return n}function of(n){return n.access_token&&n.refresh_token&&n.expires_in}var af=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class uf{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=yl(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ce})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=af(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:nf,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(G(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ce})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,o,c,h,f;try{const p={nextPage:null,lastPage:0,total:0},y=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:sf});if(y.error)throw y.error;const k=await y.json(),E=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(f=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return S.length>0&&(S.forEach(T=>{const L=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(T.split(";")[1].split("=")[1]);p[`${q}Page`]=L}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},k),p),error:null}}catch(p){if(G(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ce})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ce})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ce})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(G(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}}const lf={getItem:n=>vt()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{vt()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{vt()&&globalThis.localStorage.removeItem(n)}};function _a(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function cf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qe={debug:!!(globalThis&&vt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ml extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class hf extends ml{}async function ff(n,e,t){Qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Qe.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new hf(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Qe.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}cf();const df={url:xh,storageKey:Eh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ga(n,e,t){return await t()}class mt{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mt.nextInstanceID,mt.nextInstanceID+=1,this.instanceID>0&&xe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},df),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new uf({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=yl(i.fetch),this.lock=i.lock||ga,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:xe()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ff:this.lock=ga,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:vt()?this.storage=lf:(this.memoryStorage={},this.storage=_a(this.memoryStorage)):(this.memoryStorage={},this.storage=_a(this.memoryStorage)),xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hl}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=zh(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),xe()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),jh(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:h}=i;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return G(t)?{error:t}:{error:new dl("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const o=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:je}),{data:c,error:h}=o;if(h||!c)return{data:{user:null,session:null},error:h};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(G(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,i;try{let o;if("email"in e){const{email:y,password:k,options:E}=e;let S=null,T=null;this.flowType==="pkce"&&([S,T]=await Xe(this.storage,this.storageKey)),o=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:y,password:k,data:(t=E==null?void 0:E.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:S,code_challenge_method:T},xform:je})}else if("phone"in e){const{phone:y,password:k,options:E}=e;o=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:k,data:(r=E==null?void 0:E.data)!==null&&r!==void 0?r:{},channel:(i=E==null?void 0:E.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:je})}else throw new Pt("You must provide either an email or phone number and a password");const{data:c,error:h}=o;if(h||!c)return{data:{user:null,session:null},error:h};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(G(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:c,options:h}=e;t=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ma})}else if("phone"in e){const{phone:o,password:c,options:h}=e;t=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ma})}else throw new Pt("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new sr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Rt(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:o,error:c}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:je});if(await Ot(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new sr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:c})}catch(o){if(G(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:o,nonce:c}=e,h=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:je}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new sr}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,o,c;try{if("email"in e){const{email:h,options:f}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Xe(this.storage,this.storageKey));const{error:k}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:k}}if("phone"in e){const{phone:h,options:f}=e,{data:p,error:y}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y}}throw new Pt("You must provide either an email or phone number.")}catch(h){if(G(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var t,r;try{let i,o;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:h}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:je});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,p=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let o=null,c=null;return this.flowType==="pkce"&&([o,c]=await Xe(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:rf})}catch(o){if(G(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Oe;const{error:i}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(G(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:c}=await B(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:c,error:h}=await B(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new Pt("You must provide either an email or phone number and a type")}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Rt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<nr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,y)=>(!c&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,y))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ce}):await this._useSession(async t=>{var r,i,o;const{data:c,error:h}=t;if(h)throw h;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Oe}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Ce})})}catch(t){if(G(t))return Oh(t)&&(await this._removeSession(),await Ot(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Oe;const c=i.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await Xe(this.storage,this.storageKey));const{data:p,error:y}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:c.access_token,xform:Ce});if(y)throw y;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Oe;const t=Date.now()/1e3;let r=t,i=!0,o=null;const{payload:c}=or(e.access_token);if(c.exp&&(r=c.exp,i=r<=t),i){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(G(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:h}=t;if(h)throw h;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Oe;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!xe())throw new Tt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ha("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tt("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ha("No code detected.");const{data:Q,error:K}=await this._exchangeCodeForSession(e.code);if(K)throw K;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:Q.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:c,expires_in:h,expires_at:f,token_type:p}=e;if(!o||!h||!c||!p)throw new Tt("No session defined in URL");const y=Math.round(Date.now()/1e3),k=parseInt(h);let E=y+k;f&&(E=parseInt(f));const S=E-y;S*1e3<=Ye&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${k}s`);const T=E-k;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,E,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,E,y);const{data:L,error:q}=await this._getUser(o);if(q)throw q;const H={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:k,expires_at:E,refresh_token:c,token_type:p,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:H,redirectType:e.type},error:null}}catch(r){if(G(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Rt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:o}=t;if(o)return{error:o};const c=(r=i.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(Rh(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Ot(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Uh(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:o},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Xe(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(G(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async o=>{var c,h,f,p,y;const{data:k,error:E}=o;if(E)throw E;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=k.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(i)throw i;return xe()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(G(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:o,error:c}=t;if(c)throw c;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Fh(async i=>(i>0&&await Gh(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:je})),(i,o)=>{const c=200*Math.pow(2,i);return o&&ir(o)&&Date.now()+c-r<Ye})}catch(r){if(this._debug(t,"error",r),G(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),xe()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Rt(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<nr;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${nr}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),ir(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Oe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new $t;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Oe;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={session:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(i,"error",o),G(o)){const c={session:null,error:o};return ir(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await vl(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ot(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ye);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ye);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ye}ms, refresh threshold is ${Nn} ticks`),i<=Nn&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ml)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await Xe(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(h.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;return o?{data:null,error:o}:await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:o,error:c}=t;if(c)return{data:null,error:c};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:p}=await B(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:c,error:h}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:h})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;return o?{data:null,error:o}:await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(c=>c.factor_type==="totp"&&c.status==="verified"),o=r.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=or(i.access_token);let h=null;c.aal&&(h=c.aal);let f=h;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const y=c.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r||(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+Ph>Date.now()))return r;const{data:i,error:o}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!i.keys||i.keys.length===0)throw new yt("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(c=>c.kid===e),!r)throw new yt("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:S,error:T}=await this.getSession();if(T||!S.session)return{data:null,error:T};r=S.session.access_token}const{header:i,payload:o,signature:c,raw:{header:h,payload:f}}=or(r);if(Xh(o.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:S}=await this.getUser(r);if(S)throw S;return{data:{claims:o,header:i,signature:c},error:null}}const p=Qh(i.alg),y=await this.fetchJwk(i.kid,t),k=await crypto.subtle.importKey("jwk",y,p,!0,["verify"]);if(!await crypto.subtle.verify(p,k,c,Lh(`${h}.${f}`)))throw new yt("Invalid JWT signature");return{data:{claims:o,header:i,signature:c},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}}mt.nextInstanceID=0;const pf=mt;class yf extends pf{constructor(e){super(e)}}var vf=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(k){c(k)}}function f(y){try{p(r.throw(y))}catch(k){c(k)}}function p(y){y.done?o(y.value):i(y.value).then(h,f)}p((r=r.apply(n,e||[])).next())})};class mf{constructor(e,t,r){var i,o,c;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=wh(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:dh,realtime:yh,auth:Object.assign(Object.assign({},ph),{storageKey:f}),global:fh},y=kh(r??{},p);this.storageKey=(i=y.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=y.global.headers)!==null&&o!==void 0?o:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(k,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,y.global.fetch),this.fetch=gh(t,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new $c(`${h}/rest/v1`,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),y.accessToken||this._listenForAuthEvents()}get functions(){return new kc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new lh(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return vf(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:o,flowType:c,lock:h,debug:f},p,y){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yf({url:this.authUrl,headers:Object.assign(Object.assign({},k),p),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:c,lock:h,debug:f,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Wc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _f=(n,e,t)=>new mf(n,e,t),gf="https://syroswcbkupydkbnuixs.supabase.co",bf="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5cm9zd2Nia3VweWRrYm51aXhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MTUyOTksImV4cCI6MjA2MDQ5MTI5OX0.X8m5FmUn-A7FNvqdTDTU4yiEYH0Q2be2Z8n70Ypnk9E",wf=_f(gf,bf);function _l(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=_l(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function kf(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=_l(n))&&(r&&(r+=" "),r+=e);return r}const Zn="-",xf=n=>{const e=Sf(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const h=c.split(Zn);return h[0]===""&&h.length!==1&&h.shift(),gl(h,e)||Ef(c)},getConflictingClassGroupIds:(c,h)=>{const f=t[c]||[];return h&&r[c]?[...f,...r[c]]:f}}},gl=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?gl(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(Zn);return(c=e.validators.find(({validator:h})=>h(o)))==null?void 0:c.classGroupId},ba=/^\[(.+)\]$/,Ef=n=>{if(ba.test(n)){const e=ba.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Sf=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)Bn(t[i],r,i,e);return r},Bn=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:wa(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(Af(i)){Bn(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,c])=>{Bn(c,wa(e,o),t,r)})})},wa=(n,e)=>{let t=n;return e.split(Zn).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Af=n=>n.isThemeGetter,Pf=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){t.has(o)?t.set(o,c):i(o,c)}}},Vn="!",Hn=":",Tf=Hn.length,Rf=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let c=0,h=0,f=0,p;for(let T=0;T<i.length;T++){let L=i[T];if(c===0&&h===0){if(L===Hn){o.push(i.slice(f,T)),f=T+Tf;continue}if(L==="/"){p=T;continue}}L==="["?c++:L==="]"?c--:L==="("?h++:L===")"&&h--}const y=o.length===0?i:i.substring(f),k=Of(y),E=k!==y,S=p&&p>f?p-f:void 0;return{modifiers:o,hasImportantModifier:E,baseClassName:k,maybePostfixModifierPosition:S}};if(e){const i=e+Hn,o=r;r=c=>c.startsWith(i)?o(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},Of=n=>n.endsWith(Vn)?n.substring(0,n.length-1):n.startsWith(Vn)?n.substring(1):n,jf=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(c=>{c[0]==="["||e[c]?(i.push(...o.sort(),c),o=[]):o.push(c)}),i.push(...o.sort()),i}},If=n=>({cache:Pf(n.cacheSize),parseClassName:Rf(n),sortModifiers:jf(n),...xf(n)}),Cf=/\s+/,$f=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,c=[],h=n.trim().split(Cf);let f="";for(let p=h.length-1;p>=0;p-=1){const y=h[p],{isExternal:k,modifiers:E,hasImportantModifier:S,baseClassName:T,maybePostfixModifierPosition:L}=t(y);if(k){f=y+(f.length>0?" "+f:f);continue}let q=!!L,H=r(q?T.substring(0,L):T);if(!H){if(!q){f=y+(f.length>0?" "+f:f);continue}if(H=r(T),!H){f=y+(f.length>0?" "+f:f);continue}q=!1}const Q=o(E).join(":"),K=S?Q+Vn:Q,V=K+H;if(c.includes(V))continue;c.push(V);const J=i(H,q);for(let ce=0;ce<J.length;++ce){const O=J[ce];c.push(K+O)}f=y+(f.length>0?" "+f:f)}return f};function qf(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=bl(e))&&(r&&(r+=" "),r+=t);return r}const bl=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=bl(n[r]))&&(t&&(t+=" "),t+=e);return t};function Df(n,...e){let t,r,i,o=c;function c(f){const p=e.reduce((y,k)=>k(y),n());return t=If(p),r=t.cache.get,i=t.cache.set,o=h,h(f)}function h(f){const p=r(f);if(p)return p;const y=$f(f,t);return i(f,y),y}return function(){return o(qf.apply(null,arguments))}}const te=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},wl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kl=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Lf=/^\d+\/\d+$/,Mf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Uf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Nf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gf=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ze=n=>Lf.test(n),F=n=>!!n&&!Number.isNaN(Number(n)),Re=n=>!!n&&Number.isInteger(Number(n)),ar=n=>n.endsWith("%")&&F(n.slice(0,-1)),Se=n=>Mf.test(n),Ff=()=>!0,Bf=n=>Uf.test(n)&&!zf.test(n),xl=()=>!1,Vf=n=>Nf.test(n),Hf=n=>Gf.test(n),Jf=n=>!C(n)&&!$(n),Kf=n=>st(n,Al,xl),C=n=>wl.test(n),Me=n=>st(n,Pl,Bf),ur=n=>st(n,Yf,F),ka=n=>st(n,El,xl),Wf=n=>st(n,Sl,Hf),jt=n=>st(n,Tl,Vf),$=n=>kl.test(n),ht=n=>it(n,Pl),Xf=n=>it(n,ed),xa=n=>it(n,El),Qf=n=>it(n,Al),Zf=n=>it(n,Sl),It=n=>it(n,Tl,!0),st=(n,e,t)=>{const r=wl.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},it=(n,e,t=!1)=>{const r=kl.exec(n);return r?r[1]?e(r[1]):t:!1},El=n=>n==="position"||n==="percentage",Sl=n=>n==="image"||n==="url",Al=n=>n==="length"||n==="size"||n==="bg-size",Pl=n=>n==="length",Yf=n=>n==="number",ed=n=>n==="family-name",Tl=n=>n==="shadow",td=()=>{const n=te("color"),e=te("font"),t=te("text"),r=te("font-weight"),i=te("tracking"),o=te("leading"),c=te("breakpoint"),h=te("container"),f=te("spacing"),p=te("radius"),y=te("shadow"),k=te("inset-shadow"),E=te("text-shadow"),S=te("drop-shadow"),T=te("blur"),L=te("perspective"),q=te("aspect"),H=te("ease"),Q=te("animate"),K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...V(),$,C],ce=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],P=()=>[$,C,f],I=()=>[Ze,"full","auto",...P()],j=()=>[Re,"none","subgrid",$,C],U=()=>["auto",{span:["full",Re,$,C]},Re,$,C],z=()=>[Re,"auto",$,C],Z=()=>["auto","min","max","fr",$,C],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ye=()=>["start","end","center","stretch","center-safe","end-safe"],ve=()=>["auto",...P()],we=()=>[Ze,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],D=()=>[n,$,C],bt=()=>[...V(),xa,ka,{position:[$,C]}],Te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],wt=()=>["auto","cover","contain",Qf,Kf,{size:[$,C]}],de=()=>[ar,ht,Me],oe=()=>["","none","full",p,$,C],ue=()=>["",F,ht,Me],Ge=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[F,ar,xa,ka],ot=()=>["","none",T,$,C],Fe=()=>["none",F,$,C],le=()=>["none",F,$,C],at=()=>[F,$,C],qe=()=>[Ze,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Se],breakpoint:[Se],color:[Ff],container:[Se],"drop-shadow":[Se],ease:["in","out","in-out"],font:[Jf],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Se],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Se],shadow:[Se],spacing:["px",F],text:[Se],"text-shadow":[Se],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ze,C,$,q]}],container:["container"],columns:[{columns:[F,C,$,h]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:ce()}],"overflow-x":[{"overflow-x":ce()}],"overflow-y":[{"overflow-y":ce()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[Re,"auto",$,C]}],basis:[{basis:[Ze,"full","auto",h,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[F,Ze,"auto","initial","none",C]}],grow:[{grow:["",F,$,C]}],shrink:[{shrink:["",F,$,C]}],order:[{order:[Re,"first","last","none",$,C]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...ye(),"normal"]}],"justify-self":[{"justify-self":["auto",...ye()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...ye(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ye(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...ye(),"baseline"]}],"place-self":[{"place-self":["auto",...ye()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:ve()}],mx:[{mx:ve()}],my:[{my:ve()}],ms:[{ms:ve()}],me:[{me:ve()}],mt:[{mt:ve()}],mr:[{mr:ve()}],mb:[{mb:ve()}],ml:[{ml:ve()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:we()}],w:[{w:[h,"screen",...we()]}],"min-w":[{"min-w":[h,"screen","none",...we()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...we()]}],h:[{h:["screen",...we()]}],"min-h":[{"min-h":["screen","none",...we()]}],"max-h":[{"max-h":["screen",...we()]}],"font-size":[{text:["base",t,ht,Me]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,$,ur]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ar,C]}],"font-family":[{font:[Xf,C,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,$,C]}],"line-clamp":[{"line-clamp":[F,"none",$,ur]}],leading:[{leading:[o,...P()]}],"list-image":[{"list-image":["none",$,C]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",$,C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[F,"from-font","auto",$,Me]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[F,"auto",$,C]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$,C]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$,C]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:bt()}],"bg-repeat":[{bg:Te()}],"bg-size":[{bg:wt()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Re,$,C],radial:["",$,C],conic:[Re,$,C]},Zf,Wf]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:de()}],"gradient-via-pos":[{via:de()}],"gradient-to-pos":[{to:de()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[F,$,C]}],"outline-w":[{outline:["",F,ht,Me]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",y,It,jt]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",k,It,jt]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[F,Me]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",E,It,jt]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[F,$,C]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[F]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[$,C]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[F]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:bt()}],"mask-repeat":[{mask:Te()}],"mask-size":[{mask:wt()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",$,C]}],filter:[{filter:["","none",$,C]}],blur:[{blur:ot()}],brightness:[{brightness:[F,$,C]}],contrast:[{contrast:[F,$,C]}],"drop-shadow":[{"drop-shadow":["","none",S,It,jt]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",F,$,C]}],"hue-rotate":[{"hue-rotate":[F,$,C]}],invert:[{invert:["",F,$,C]}],saturate:[{saturate:[F,$,C]}],sepia:[{sepia:["",F,$,C]}],"backdrop-filter":[{"backdrop-filter":["","none",$,C]}],"backdrop-blur":[{"backdrop-blur":ot()}],"backdrop-brightness":[{"backdrop-brightness":[F,$,C]}],"backdrop-contrast":[{"backdrop-contrast":[F,$,C]}],"backdrop-grayscale":[{"backdrop-grayscale":["",F,$,C]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[F,$,C]}],"backdrop-invert":[{"backdrop-invert":["",F,$,C]}],"backdrop-opacity":[{"backdrop-opacity":[F,$,C]}],"backdrop-saturate":[{"backdrop-saturate":[F,$,C]}],"backdrop-sepia":[{"backdrop-sepia":["",F,$,C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",$,C]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[F,"initial",$,C]}],ease:[{ease:["linear","initial",H,$,C]}],delay:[{delay:[F,$,C]}],animate:[{animate:["none",Q,$,C]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[L,$,C]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:le()}],"scale-x":[{"scale-x":le()}],"scale-y":[{"scale-y":le()}],"scale-z":[{"scale-z":le()}],"scale-3d":["scale-3d"],skew:[{skew:at()}],"skew-x":[{"skew-x":at()}],"skew-y":[{"skew-y":at()}],transform:[{transform:[$,C,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:qe()}],"translate-x":[{"translate-x":qe()}],"translate-y":[{"translate-y":qe()}],"translate-z":[{"translate-z":qe()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$,C]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$,C]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[F,ht,Me,ur]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},rd=Df(td),ae=[];for(let n=0;n<256;++n)ae.push((n+256).toString(16).slice(1));function nd(n,e=0){return(ae[n[e+0]]+ae[n[e+1]]+ae[n[e+2]]+ae[n[e+3]]+"-"+ae[n[e+4]]+ae[n[e+5]]+"-"+ae[n[e+6]]+ae[n[e+7]]+"-"+ae[n[e+8]]+ae[n[e+9]]+"-"+ae[n[e+10]]+ae[n[e+11]]+ae[n[e+12]]+ae[n[e+13]]+ae[n[e+14]]+ae[n[e+15]]).toLowerCase()}let lr;const sd=new Uint8Array(16);function id(){if(!lr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");lr=crypto.getRandomValues.bind(crypto)}return lr(sd)}const od=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ea={randomUUID:od};function ad(n,e,t){var i;if(Ea.randomUUID&&!n)return Ea.randomUUID();n=n||{};const r=n.random??((i=n.rng)==null?void 0:i.call(n))??id();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,nd(r)}function Op(...n){return rd(kf(n))}const jp=n=>n.name&&n.owner&&n.sex&&n.animal_type,Ip=n=>{const e=new Date,t=new Date(n),r=e.getTime()-t.getTime(),i=Math.floor(r/(1e3*60*60*24)),o=30,c=365,h=Math.floor(i/c),f=i-h*c,p=Math.floor(f/o),y=f-p*o;return{years:h,months:p,days:y}},Cp=({days:n,months:e,years:t})=>t===1?"1 año":t!==0?`${t} años`:e===1?"1 mes":e!==0?`${e} meses`:`${n} días`,$p=n=>{switch(n){case"male":return"Macho";case"female":return"Hembra";default:throw new Error("Unexpected sex value")}},ud=["Alta Verapaz","Baja Verapaz","Chimaltenango","Chiquimula","El Progreso","Escuintla","Guatemala","Huehuetenango","Izabal","Jalapa","Jutiapa","Petén","Quetzaltenango","Quiché","Retalhuleu","Sacatepéquez","San Marcos","Santa Rosa","Sololá","Suchitepéquez","Totonicapán","Zacapa"],qp=ud.map(n=>({value:n,label:n})),Dp=n=>n.replace(/\D/g,"").replace(/(\d{4})(\d{4})/,"$1-$2"),Lp=5e6,Mp=["image/jpeg","image/jpg","image/png","image/webp"],Up=async(n,e)=>{if(!n||n.length===0)return null;const t=n.item(0),r=await t.arrayBuffer(),i=await wf.storage.from(e).upload(ad(),r,{contentType:t.type});return i.error!==null?null:i.data.path};var ne={},se={},Sa;function ld(){if(Sa)return se;Sa=1;const n=/^[A-Za-z]:\//;function e(O=""){return O&&O.replace(/\\/g,"/").replace(n,P=>P.toUpperCase())}const t=/^[/\\]{2}/,r=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,i=/^[A-Za-z]:$/,o=/^\/([A-Za-z]:)?$/,c="/",h=":",f=function(O){if(O.length===0)return".";O=e(O);const P=O.match(t),I=S(O),j=O[O.length-1]==="/";return O=E(O,!I),O.length===0?I?"/":j?"./":".":(j&&(O+="/"),i.test(O)&&(O+="/"),P?I?`//${O}`:`//./${O}`:I&&!S(O)?`/${O}`:O)},p=function(...O){if(O.length===0)return".";let P;for(const I of O)I&&I.length>0&&(P===void 0?P=I:P+=`/${I}`);return P===void 0?".":f(P.replace(/\/\/+/g,"/"))};function y(){return typeof process<"u"&&typeof process.cwd=="function"?process.cwd().replace(/\\/g,"/"):"/"}const k=function(...O){O=O.map(j=>e(j));let P="",I=!1;for(let j=O.length-1;j>=-1&&!I;j--){const U=j>=0?O[j]:y();!U||U.length===0||(P=`${U}/${P}`,I=S(U))}return P=E(P,!I),I&&!S(P)?`/${P}`:P.length>0?P:"."};function E(O,P){let I="",j=0,U=-1,z=0,Z=null;for(let W=0;W<=O.length;++W){if(W<O.length)Z=O[W];else{if(Z==="/")break;Z="/"}if(Z==="/"){if(!(U===W-1||z===1))if(z===2){if(I.length<2||j!==2||I[I.length-1]!=="."||I[I.length-2]!=="."){if(I.length>2){const ye=I.lastIndexOf("/");ye===-1?(I="",j=0):(I=I.slice(0,ye),j=I.length-1-I.lastIndexOf("/")),U=W,z=0;continue}else if(I.length>0){I="",j=0,U=W,z=0;continue}}P&&(I+=I.length>0?"/..":"..",j=2)}else I.length>0?I+=`/${O.slice(U+1,W)}`:I=O.slice(U+1,W),j=W-U-1;U=W,z=0}else Z==="."&&z!==-1?++z:z=-1}return I}const S=function(O){return r.test(O)},T=function(O){return e(O)},L=/.(\.[^./]+)$/,q=function(O){const P=L.exec(e(O));return P&&P[1]||""},H=function(O,P){const I=k(O).replace(o,"$1").split("/"),j=k(P).replace(o,"$1").split("/");if(j[0][1]===":"&&I[0][1]===":"&&I[0]!==j[0])return j.join("/");const U=[...I];for(const z of U){if(j[0]!==z)break;I.shift(),j.shift()}return[...I.map(()=>".."),...j].join("/")},Q=function(O){const P=e(O).replace(/\/$/,"").split("/").slice(0,-1);return P.length===1&&i.test(P[0])&&(P[0]+="/"),P.join("/")||(S(O)?"/":".")},K=function(O){const P=[O.root,O.dir,O.base??O.name+O.ext].filter(Boolean);return e(O.root?k(...P):P.join("/"))},V=function(O,P){const I=e(O).split("/").pop();return P&&I.endsWith(P)?I.slice(0,-P.length):I},J=function(O){const P=e(O).split("/").shift()||"/",I=V(O),j=q(I);return{root:P,dir:Q(O),base:I,ext:j,name:I.slice(0,I.length-j.length)}},ce={__proto__:null,basename:V,delimiter:h,dirname:Q,extname:q,format:K,isAbsolute:S,join:p,normalize:f,normalizeString:E,parse:J,relative:H,resolve:k,sep:c,toNamespacedPath:T};return se.basename=V,se.delimiter=h,se.dirname=Q,se.extname=q,se.format=K,se.isAbsolute=S,se.join=p,se.normalize=f,se.normalizeString=E,se.normalizeWindowsPath=e,se.parse=J,se.path=ce,se.relative=H,se.resolve=k,se.sep=c,se.toNamespacedPath=T,se}var Aa;function cd(){if(Aa)return ne;Aa=1,Object.defineProperty(ne,"__esModule",{value:!0});const n=ld();return ne.basename=n.basename,ne.default=n.path,ne.delimiter=n.delimiter,ne.dirname=n.dirname,ne.extname=n.extname,ne.format=n.format,ne.isAbsolute=n.isAbsolute,ne.join=n.join,ne.normalize=n.normalize,ne.normalizeString=n.normalizeString,ne.parse=n.parse,ne.relative=n.relative,ne.resolve=n.resolve,ne.sep=n.sep,ne.toNamespacedPath=n.toNamespacedPath,ne}var cr,Pa;function hd(){if(Pa)return cr;Pa=1;var n=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(u,a)=>{for(var s in a)n(u,s,{get:a[s],enumerable:!0})},o=(u,a,s,l)=>{if(a&&typeof a=="object"||typeof a=="function")for(let d of t(a))!r.call(u,d)&&d!==s&&n(u,d,{get:()=>a[d],enumerable:!(l=e(a,d))||l.enumerable});return u},c=u=>o(n({},"__esModule",{value:!0}),u),h={};i(h,{BASE64_REGEX:()=>p,BIC_REGEX:()=>y,CUID2_REGEX:()=>k,DECIMAL_REGEX:()=>E,EMAIL_REGEX:()=>S,EMOJI_REGEX:()=>T,HEXADECIMAL_REGEX:()=>L,HEX_COLOR_REGEX:()=>q,IMEI_REGEX:()=>H,IPV4_REGEX:()=>Q,IPV6_REGEX:()=>K,IP_REGEX:()=>V,ISO_DATE_REGEX:()=>J,ISO_DATE_TIME_REGEX:()=>ce,ISO_TIMESTAMP_REGEX:()=>I,ISO_TIME_REGEX:()=>O,ISO_TIME_SECOND_REGEX:()=>P,ISO_WEEK_REGEX:()=>j,MAC48_REGEX:()=>U,MAC64_REGEX:()=>z,MAC_REGEX:()=>Z,NANO_ID_REGEX:()=>W,OCTAL_REGEX:()=>ye,ULID_REGEX:()=>ve,UUID_REGEX:()=>we,ValiError:()=>kt,_addIssue:()=>x,_isLuhnAlgo:()=>zt,_isValidObjectKey:()=>De,_joinExpects:()=>ke,_stringify:()=>he,any:()=>Ui,array:()=>zi,arrayAsync:()=>Ni,awaitAsync:()=>f,base64:()=>as,bic:()=>us,bigint:()=>Gi,blob:()=>Fi,boolean:()=>Bi,brand:()=>ls,bytes:()=>cs,check:()=>hs,checkAsync:()=>fs,checkItems:()=>ds,config:()=>Bl,creditCard:()=>ps,cuid2:()=>ys,custom:()=>Vi,customAsync:()=>Hi,date:()=>Ji,decimal:()=>vs,deleteGlobalConfig:()=>wt,deleteGlobalMessage:()=>Ge,deleteSchemaMessage:()=>Fe,deleteSpecificMessage:()=>$l,description:()=>ms,email:()=>_s,emoji:()=>gs,empty:()=>bs,endsWith:()=>ws,entriesFromList:()=>Dl,enum:()=>Vt,enum_:()=>Vt,everyItem:()=>ks,excludes:()=>xs,fallback:()=>Vl,fallbackAsync:()=>Hl,file:()=>Ki,filterItems:()=>Es,findItem:()=>Ss,finite:()=>As,flatten:()=>Jl,forward:()=>Kl,forwardAsync:()=>Wl,function:()=>Ht,function_:()=>Ht,getDefault:()=>ge,getDefaults:()=>Nt,getDefaultsAsync:()=>Gt,getDotPath:()=>os,getFallback:()=>ut,getFallbacks:()=>Ft,getFallbacksAsync:()=>Bt,getGlobalConfig:()=>Te,getGlobalMessage:()=>ue,getSchemaMessage:()=>ot,getSpecificMessage:()=>qe,hash:()=>Ps,hexColor:()=>Rs,hexadecimal:()=>Ts,imei:()=>Os,includes:()=>js,instance:()=>Wi,integer:()=>Is,intersect:()=>Xi,intersectAsync:()=>Qi,ip:()=>Cs,ipv4:()=>$s,ipv6:()=>qs,is:()=>Xl,isOfKind:()=>Ll,isOfType:()=>Ml,isValiError:()=>Ul,isoDate:()=>Ds,isoDateTime:()=>Ls,isoTime:()=>Ms,isoTimeSecond:()=>Us,isoTimestamp:()=>zs,isoWeek:()=>Ns,keyof:()=>Ql,lazy:()=>Zi,lazyAsync:()=>Yi,length:()=>Gs,literal:()=>eo,looseObject:()=>to,looseObjectAsync:()=>ro,looseTuple:()=>no,looseTupleAsync:()=>so,mac:()=>Fs,mac48:()=>Bs,mac64:()=>Vs,map:()=>io,mapAsync:()=>oo,mapItems:()=>Hs,maxBytes:()=>Js,maxLength:()=>Ks,maxSize:()=>Ws,maxValue:()=>Xs,mimeType:()=>Qs,minBytes:()=>Zs,minLength:()=>Ys,minSize:()=>ei,minValue:()=>ti,multipleOf:()=>ri,nan:()=>ao,nanoid:()=>ni,never:()=>uo,nonEmpty:()=>si,nonNullable:()=>lo,nonNullableAsync:()=>co,nonNullish:()=>ho,nonNullishAsync:()=>fo,nonOptional:()=>Jt,nonOptionalAsync:()=>Kt,normalize:()=>ii,notBytes:()=>oi,notLength:()=>ai,notSize:()=>ui,notValue:()=>li,null:()=>Wt,null_:()=>Wt,nullable:()=>po,nullableAsync:()=>yo,nullish:()=>vo,nullishAsync:()=>mo,number:()=>_o,object:()=>go,objectAsync:()=>bo,objectWithRest:()=>wo,objectWithRestAsync:()=>ko,octal:()=>ci,omit:()=>Zl,optional:()=>Xt,optionalAsync:()=>Qt,parse:()=>Vo,parseAsync:()=>Ho,parser:()=>Yl,parserAsync:()=>ec,partial:()=>tc,partialAsync:()=>rc,partialCheck:()=>fi,partialCheckAsync:()=>di,pick:()=>nc,picklist:()=>Zt,pipe:()=>sc,pipeAsync:()=>ic,promise:()=>xo,rawCheck:()=>pi,rawCheckAsync:()=>yi,rawTransform:()=>vi,rawTransformAsync:()=>mi,readonly:()=>_i,record:()=>Eo,recordAsync:()=>So,reduceItems:()=>gi,regex:()=>bi,required:()=>oc,requiredAsync:()=>ac,safeInteger:()=>wi,safeParse:()=>Jo,safeParseAsync:()=>Ko,safeParser:()=>uc,safeParserAsync:()=>lc,set:()=>Ao,setAsync:()=>Po,setGlobalConfig:()=>bt,setGlobalMessage:()=>oe,setSchemaMessage:()=>ee,setSpecificMessage:()=>at,size:()=>ki,someItem:()=>xi,sortItems:()=>Ei,startsWith:()=>Si,strictObject:()=>To,strictObjectAsync:()=>Ro,strictTuple:()=>Oo,strictTupleAsync:()=>jo,string:()=>Io,symbol:()=>Co,toLowerCase:()=>Ai,toMaxValue:()=>Pi,toMinValue:()=>Ti,toUpperCase:()=>Ri,transform:()=>Oi,transformAsync:()=>ji,trim:()=>Ii,trimEnd:()=>Ci,trimStart:()=>$i,tuple:()=>$o,tupleAsync:()=>qo,tupleWithRest:()=>Do,tupleWithRestAsync:()=>Lo,ulid:()=>qi,undefined:()=>Yt,undefined_:()=>Yt,undefinedable:()=>Mo,undefinedableAsync:()=>Uo,union:()=>zo,unionAsync:()=>No,unknown:()=>Go,unwrap:()=>cc,url:()=>Di,uuid:()=>Li,value:()=>Mi,variant:()=>Fo,variantAsync:()=>Bo,void:()=>er,void_:()=>er}),cr=c(h);function f(){return{kind:"transformation",type:"await",reference:f,async:!0,async _run(u){return u.value=await u.value,u}}}var p=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,y=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,k=/^[a-z][\da-z]*$/u,E=/^\d+$/u,S=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,T=new RegExp("^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$","u"),L=/^(?:0[hx])?[\da-f]+$/iu,q=/^#(?:[\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/iu,H=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,Q=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,K=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,V=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,J=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,ce=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3]):[0-5]\d$/u,O=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,P=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,I=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,j=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,U=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,z=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,Z=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,W=/^[\w-]+$/u,ye=/^(?:0o)?[0-7]+$/iu,ve=/^[\da-hjkmnp-tv-z]{26}$/iu,we=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu,D;function bt(u){D={...D,...u}}function Te(u){return{lang:(u==null?void 0:u.lang)??(D==null?void 0:D.lang),message:u==null?void 0:u.message,abortEarly:(u==null?void 0:u.abortEarly)??(D==null?void 0:D.abortEarly),abortPipeEarly:(u==null?void 0:u.abortPipeEarly)??(D==null?void 0:D.abortPipeEarly)}}function wt(){D=void 0}var de;function oe(u,a){de||(de=new Map),de.set(a,u)}function ue(u){return de==null?void 0:de.get(u)}function Ge(u){de==null||de.delete(u)}var me;function ee(u,a){me||(me=new Map),me.set(a,u)}function ot(u){return me==null?void 0:me.get(u)}function Fe(u){me==null||me.delete(u)}var le;function at(u,a,s){le||(le=new Map),le.get(u)||le.set(u,new Map),le.get(u).set(s,a)}function qe(u,a){var s;return(s=le==null?void 0:le.get(u))==null?void 0:s.get(a)}function $l(u,a){var s;(s=le==null?void 0:le.get(u))==null||s.delete(a)}function he(u){var s,l;const a=typeof u;return a==="string"?`"${u}"`:a==="number"||a==="bigint"||a==="boolean"?`${u}`:a==="object"||a==="function"?(u&&((l=(s=Object.getPrototypeOf(u))==null?void 0:s.constructor)==null?void 0:l.name))??"null":a}function x(u,a,s,l,d){const v=d&&"input"in d?d.input:s.value,_=(d==null?void 0:d.expected)??u.expects??null,g=(d==null?void 0:d.received)??he(v),m={kind:u.kind,type:u.type,input:v,expected:_,received:g,message:`Invalid ${a}: ${_?`Expected ${_} but r`:"R"}eceived ${g}`,requirement:u.requirement,path:d==null?void 0:d.path,issues:d==null?void 0:d.issues,lang:l.lang,abortEarly:l.abortEarly,abortPipeEarly:l.abortPipeEarly},w=u.kind==="schema",b=(d==null?void 0:d.message)??u.message??qe(u.reference,m.lang)??(w?ot(m.lang):null)??l.message??ue(m.lang);b&&(m.message=typeof b=="function"?b(m):b),w&&(s.typed=!1),s.issues?s.issues.push(m):s.issues=[m]}var ql=/\D/gu;function zt(u){const a=u.replace(ql,"");let s=a.length,l=1,d=0;for(;s;){const v=+a[--s];l^=1,d+=l?[0,2,4,6,8,1,3,5,7,9][v]:v}return d%10===0}function De(u,a){return Object.hasOwn(u,a)&&a!=="__proto__"&&a!=="prototype"&&a!=="constructor"}function ke(u,a){const s=[...new Set(u)];return s.length>1?`(${s.join(` ${a} `)})`:s[0]??"never"}function Dl(u,a){const s={};for(const l of u)s[l]=a;return s}function os(u){if(u.path){let a="";for(const s of u.path)if(typeof s.key=="string"||typeof s.key=="number")a?a+=`.${s.key}`:a+=s.key;else return null;return a}return null}function Ll(u,a){return a.kind===u}function Ml(u,a){return a.type===u}function Ul(u){return u instanceof kt}var kt=class extends Error{constructor(a){super(a[0].message);Wo(this,"issues");this.name="ValiError",this.issues=a}};function as(u){return{kind:"validation",type:"base64",reference:as,async:!1,expects:null,requirement:p,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"Base64",a,s),a}}}function us(u){return{kind:"validation",type:"bic",reference:us,async:!1,expects:null,requirement:y,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"BIC",a,s),a}}}function ls(u){return{kind:"transformation",type:"brand",reference:ls,async:!1,name:u,_run(a){return a}}}function cs(u,a){return{kind:"validation",type:"bytes",reference:cs,async:!1,expects:`${u}`,requirement:u,message:a,_run(s,l){if(s.typed){const d=new TextEncoder().encode(s.value).length;d!==this.requirement&&x(this,"bytes",s,l,{received:`${d}`})}return s}}}function hs(u,a){return{kind:"validation",type:"check",reference:hs,async:!1,expects:null,requirement:u,message:a,_run(s,l){return s.typed&&!this.requirement(s.value)&&x(this,"input",s,l),s}}}function fs(u,a){return{kind:"validation",type:"check",reference:fs,async:!0,expects:null,requirement:u,message:a,async _run(s,l){return s.typed&&!await this.requirement(s.value)&&x(this,"input",s,l),s}}}function ds(u,a){return{kind:"validation",type:"check_items",reference:ds,async:!1,expects:null,requirement:u,message:a,_run(s,l){if(s.typed)for(let d=0;d<s.value.length;d++){const v=s.value[d];this.requirement(v,d,s.value)||x(this,"item",s,l,{input:v,path:[{type:"array",origin:"value",input:s.value,key:d,value:v}]})}return s}}}var zl=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,Nl=/[- ]/gu,Gl=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function ps(u){return{kind:"validation",type:"credit_card",reference:ps,async:!1,expects:null,requirement(a){let s;return zl.test(a)&&(s=a.replace(Nl,""))&&Gl.some(l=>l.test(s))&&zt(s)},message:u,_run(a,s){return a.typed&&!this.requirement(a.value)&&x(this,"credit card",a,s),a}}}function ys(u){return{kind:"validation",type:"cuid2",reference:ys,async:!1,expects:null,requirement:k,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"Cuid2",a,s),a}}}function vs(u){return{kind:"validation",type:"decimal",reference:vs,async:!1,expects:null,requirement:E,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"decimal",a,s),a}}}function ms(u){return{kind:"metadata",type:"description",reference:ms,description:u}}function _s(u){return{kind:"validation",type:"email",reference:_s,expects:null,async:!1,requirement:S,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"email",a,s),a}}}function gs(u){return{kind:"validation",type:"emoji",reference:gs,async:!1,expects:null,requirement:T,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"emoji",a,s),a}}}function bs(u){return{kind:"validation",type:"empty",reference:bs,async:!1,expects:"0",message:u,_run(a,s){return a.typed&&a.value.length>0&&x(this,"length",a,s,{received:`${a.value.length}`}),a}}}function ws(u,a){return{kind:"validation",type:"ends_with",reference:ws,async:!1,expects:`"${u}"`,requirement:u,message:a,_run(s,l){return s.typed&&!s.value.endsWith(this.requirement)&&x(this,"end",s,l,{received:`"${s.value.slice(-this.requirement.length)}"`}),s}}}function ks(u,a){return{kind:"validation",type:"every_item",reference:ks,async:!1,expects:null,requirement:u,message:a,_run(s,l){return s.typed&&!s.value.every(this.requirement)&&x(this,"item",s,l),s}}}function xs(u,a){const s=he(u);return{kind:"validation",type:"excludes",reference:xs,async:!1,expects:`!${s}`,requirement:u,message:a,_run(l,d){return l.typed&&l.value.includes(this.requirement)&&x(this,"content",l,d,{received:s}),l}}}function Es(u){return{kind:"transformation",type:"filter_items",reference:Es,async:!1,operation:u,_run(a){return a.value=a.value.filter(this.operation),a}}}function Ss(u){return{kind:"transformation",type:"find_item",reference:Ss,async:!1,operation:u,_run(a){return a.value=a.value.find(this.operation),a}}}function As(u){return{kind:"validation",type:"finite",reference:As,async:!1,expects:null,requirement:Number.isFinite,message:u,_run(a,s){return a.typed&&!this.requirement(a.value)&&x(this,"finite",a,s),a}}}var Fl={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function Ps(u,a){return{kind:"validation",type:"hash",reference:Ps,expects:null,async:!1,requirement:RegExp(u.map(s=>`^[a-f0-9]{${Fl[s]}}$`).join("|"),"iu"),message:a,_run(s,l){return s.typed&&!this.requirement.test(s.value)&&x(this,"hash",s,l),s}}}function Ts(u){return{kind:"validation",type:"hexadecimal",reference:Ts,async:!1,expects:null,requirement:L,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"hexadecimal",a,s),a}}}function Rs(u){return{kind:"validation",type:"hex_color",reference:Rs,async:!1,expects:null,requirement:q,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"hex color",a,s),a}}}function Os(u){return{kind:"validation",type:"imei",reference:Os,async:!1,expects:null,requirement(a){return H.test(a)&&zt(a)},message:u,_run(a,s){return a.typed&&!this.requirement(a.value)&&x(this,"IMEI",a,s),a}}}function js(u,a){const s=he(u);return{kind:"validation",type:"includes",reference:js,async:!1,expects:s,requirement:u,message:a,_run(l,d){return l.typed&&!l.value.includes(this.requirement)&&x(this,"content",l,d,{received:`!${s}`}),l}}}function Is(u){return{kind:"validation",type:"integer",reference:Is,async:!1,expects:null,requirement:Number.isInteger,message:u,_run(a,s){return a.typed&&!this.requirement(a.value)&&x(this,"integer",a,s),a}}}function Cs(u){return{kind:"validation",type:"ip",reference:Cs,async:!1,expects:null,requirement:V,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"IP",a,s),a}}}function $s(u){return{kind:"validation",type:"ipv4",reference:$s,async:!1,expects:null,requirement:Q,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"IPv4",a,s),a}}}function qs(u){return{kind:"validation",type:"ipv6",reference:qs,async:!1,expects:null,requirement:K,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"IPv6",a,s),a}}}function Ds(u){return{kind:"validation",type:"iso_date",reference:Ds,async:!1,expects:null,requirement:J,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"date",a,s),a}}}function Ls(u){return{kind:"validation",type:"iso_date_time",reference:Ls,async:!1,expects:null,requirement:ce,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"date-time",a,s),a}}}function Ms(u){return{kind:"validation",type:"iso_time",reference:Ms,async:!1,expects:null,requirement:O,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"time",a,s),a}}}function Us(u){return{kind:"validation",type:"iso_time_second",reference:Us,async:!1,expects:null,requirement:P,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"time-second",a,s),a}}}function zs(u){return{kind:"validation",type:"iso_timestamp",reference:zs,async:!1,expects:null,requirement:I,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"timestamp",a,s),a}}}function Ns(u){return{kind:"validation",type:"iso_week",reference:Ns,async:!1,expects:null,requirement:j,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"week",a,s),a}}}function Gs(u,a){return{kind:"validation",type:"length",reference:Gs,async:!1,expects:`${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.length!==this.requirement&&x(this,"length",s,l,{received:`${s.value.length}`}),s}}}function Fs(u){return{kind:"validation",type:"mac",reference:Fs,async:!1,expects:null,requirement:Z,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"MAC",a,s),a}}}function Bs(u){return{kind:"validation",type:"mac48",reference:Bs,async:!1,expects:null,requirement:U,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"48-bit MAC",a,s),a}}}function Vs(u){return{kind:"validation",type:"mac64",reference:Vs,async:!1,expects:null,requirement:z,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"64-bit MAC",a,s),a}}}function Hs(u){return{kind:"transformation",type:"map_items",reference:Hs,async:!1,operation:u,_run(a){return a.value=a.value.map(this.operation),a}}}function Js(u,a){return{kind:"validation",type:"max_bytes",reference:Js,async:!1,expects:`<=${u}`,requirement:u,message:a,_run(s,l){if(s.typed){const d=new TextEncoder().encode(s.value).length;d>this.requirement&&x(this,"bytes",s,l,{received:`${d}`})}return s}}}function Ks(u,a){return{kind:"validation",type:"max_length",reference:Ks,async:!1,expects:`<=${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.length>this.requirement&&x(this,"length",s,l,{received:`${s.value.length}`}),s}}}function Ws(u,a){return{kind:"validation",type:"max_size",reference:Ws,async:!1,expects:`<=${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.size>this.requirement&&x(this,"size",s,l,{received:`${s.value.size}`}),s}}}function Xs(u,a){return{kind:"validation",type:"max_value",reference:Xs,async:!1,expects:`<=${u instanceof Date?u.toJSON():he(u)}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value>this.requirement&&x(this,"value",s,l,{received:s.value instanceof Date?s.value.toJSON():he(s.value)}),s}}}function Qs(u,a){return{kind:"validation",type:"mime_type",reference:Qs,async:!1,expects:ke(u.map(s=>`"${s}"`),"|"),requirement:u,message:a,_run(s,l){return s.typed&&!this.requirement.includes(s.value.type)&&x(this,"MIME type",s,l,{received:`"${s.value.type}"`}),s}}}function Zs(u,a){return{kind:"validation",type:"min_bytes",reference:Zs,async:!1,expects:`>=${u}`,requirement:u,message:a,_run(s,l){if(s.typed){const d=new TextEncoder().encode(s.value).length;d<this.requirement&&x(this,"bytes",s,l,{received:`${d}`})}return s}}}function Ys(u,a){return{kind:"validation",type:"min_length",reference:Ys,async:!1,expects:`>=${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.length<this.requirement&&x(this,"length",s,l,{received:`${s.value.length}`}),s}}}function ei(u,a){return{kind:"validation",type:"min_size",reference:ei,async:!1,expects:`>=${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.size<this.requirement&&x(this,"size",s,l,{received:`${s.value.size}`}),s}}}function ti(u,a){return{kind:"validation",type:"min_value",reference:ti,async:!1,expects:`>=${u instanceof Date?u.toJSON():he(u)}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value<this.requirement&&x(this,"value",s,l,{received:s.value instanceof Date?s.value.toJSON():he(s.value)}),s}}}function ri(u,a){return{kind:"validation",type:"multiple_of",reference:ri,async:!1,expects:`%${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value%this.requirement!==0&&x(this,"multiple",s,l),s}}}function ni(u){return{kind:"validation",type:"nanoid",reference:ni,async:!1,expects:null,requirement:W,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"Nano ID",a,s),a}}}function si(u){return{kind:"validation",type:"non_empty",reference:si,async:!1,expects:"!0",message:u,_run(a,s){return a.typed&&a.value.length===0&&x(this,"length",a,s,{received:"0"}),a}}}function ii(u){return{kind:"transformation",type:"normalize",reference:ii,async:!1,form:u,_run(a){return a.value=a.value.normalize(this.form),a}}}function oi(u,a){return{kind:"validation",type:"not_bytes",reference:oi,async:!1,expects:`!${u}`,requirement:u,message:a,_run(s,l){if(s.typed){const d=new TextEncoder().encode(s.value).length;d===this.requirement&&x(this,"bytes",s,l,{received:`${d}`})}return s}}}function ai(u,a){return{kind:"validation",type:"not_length",reference:ai,async:!1,expects:`!${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.length===this.requirement&&x(this,"length",s,l,{received:`${s.value.length}`}),s}}}function ui(u,a){return{kind:"validation",type:"not_size",reference:ui,async:!1,expects:`!${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.size===this.requirement&&x(this,"size",s,l,{received:`${s.value.size}`}),s}}}function li(u,a){return{kind:"validation",type:"not_value",reference:li,async:!1,expects:u instanceof Date?`!${u.toJSON()}`:`!${he(u)}`,requirement:u,message:a,_run(s,l){return s.typed&&this.requirement<=s.value&&this.requirement>=s.value&&x(this,"value",s,l,{received:s.value instanceof Date?s.value.toJSON():he(s.value)}),s}}}function ci(u){return{kind:"validation",type:"octal",reference:ci,async:!1,expects:null,requirement:ye,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"octal",a,s),a}}}function hi(u,a){var s;if(u.issues)for(const l of a)for(const d of u.issues){let v=!1;const _=Math.min(l.length,((s=d.path)==null?void 0:s.length)??0);for(let g=0;g<_;g++)if(l[g]!==d.path[g].key){v=!0;break}if(!v)return!1}return!0}function fi(u,a,s){return{kind:"validation",type:"partial_check",reference:fi,async:!1,expects:null,requirement:a,message:s,_run(l,d){return hi(l,u)&&!this.requirement(l.value)&&x(this,"input",l,d),l}}}function di(u,a,s){return{kind:"validation",type:"partial_check",reference:di,async:!0,expects:null,requirement:a,message:s,async _run(l,d){return hi(l,u)&&!await this.requirement(l.value)&&x(this,"input",l,d),l}}}function pi(u){return{kind:"validation",type:"raw_check",reference:pi,async:!1,expects:null,_run(a,s){return u({dataset:a,config:s,addIssue:l=>x(this,(l==null?void 0:l.label)??"input",a,s,l)}),a}}}function yi(u){return{kind:"validation",type:"raw_check",reference:yi,async:!0,expects:null,async _run(a,s){return await u({dataset:a,config:s,addIssue:l=>x(this,(l==null?void 0:l.label)??"input",a,s,l)}),a}}}function vi(u){return{kind:"transformation",type:"raw_transform",reference:vi,async:!1,_run(a,s){const l=u({dataset:a,config:s,addIssue:d=>x(this,(d==null?void 0:d.label)??"input",a,s,d),NEVER:null});return a.issues?a.typed=!1:a.value=l,a}}}function mi(u){return{kind:"transformation",type:"raw_transform",reference:mi,async:!0,async _run(a,s){const l=await u({dataset:a,config:s,addIssue:d=>x(this,(d==null?void 0:d.label)??"input",a,s,d),NEVER:null});return a.issues?a.typed=!1:a.value=l,a}}}function _i(){return{kind:"transformation",type:"readonly",reference:_i,async:!1,_run(u){return u}}}function gi(u,a){return{kind:"transformation",type:"reduce_items",reference:gi,async:!1,operation:u,initial:a,_run(s){return s.value=s.value.reduce(this.operation,this.initial),s}}}function bi(u,a){return{kind:"validation",type:"regex",reference:bi,async:!1,expects:`${u}`,requirement:u,message:a,_run(s,l){return s.typed&&!this.requirement.test(s.value)&&x(this,"format",s,l),s}}}function wi(u){return{kind:"validation",type:"safe_integer",reference:wi,async:!1,expects:null,requirement:Number.isSafeInteger,message:u,_run(a,s){return a.typed&&!this.requirement(a.value)&&x(this,"safe integer",a,s),a}}}function ki(u,a){return{kind:"validation",type:"size",reference:ki,async:!1,expects:`${u}`,requirement:u,message:a,_run(s,l){return s.typed&&s.value.size!==this.requirement&&x(this,"size",s,l,{received:`${s.value.size}`}),s}}}function xi(u,a){return{kind:"validation",type:"some_item",reference:xi,async:!1,expects:null,requirement:u,message:a,_run(s,l){return s.typed&&!s.value.some(this.requirement)&&x(this,"item",s,l),s}}}function Ei(u){return{kind:"transformation",type:"sort_items",reference:Ei,async:!1,operation:u,_run(a){return a.value=a.value.sort(this.operation),a}}}function Si(u,a){return{kind:"validation",type:"starts_with",reference:Si,async:!1,expects:`"${u}"`,requirement:u,message:a,_run(s,l){return s.typed&&!s.value.startsWith(this.requirement)&&x(this,"start",s,l,{received:`"${s.value.slice(0,this.requirement.length)}"`}),s}}}function Ai(){return{kind:"transformation",type:"to_lower_case",reference:Ai,async:!1,_run(u){return u.value=u.value.toLowerCase(),u}}}function Pi(u){return{kind:"transformation",type:"to_max_value",reference:Pi,async:!1,requirement:u,_run(a){return a.value=a.value>this.requirement?this.requirement:a.value,a}}}function Ti(u){return{kind:"transformation",type:"to_min_value",reference:Ti,async:!1,requirement:u,_run(a){return a.value=a.value<this.requirement?this.requirement:a.value,a}}}function Ri(){return{kind:"transformation",type:"to_upper_case",reference:Ri,async:!1,_run(u){return u.value=u.value.toUpperCase(),u}}}function Oi(u){return{kind:"transformation",type:"transform",reference:Oi,async:!1,operation:u,_run(a){return a.value=this.operation(a.value),a}}}function ji(u){return{kind:"transformation",type:"transform",reference:ji,async:!0,operation:u,async _run(a){return a.value=await this.operation(a.value),a}}}function Ii(){return{kind:"transformation",type:"trim",reference:Ii,async:!1,_run(u){return u.value=u.value.trim(),u}}}function Ci(){return{kind:"transformation",type:"trim_end",reference:Ci,async:!1,_run(u){return u.value=u.value.trimEnd(),u}}}function $i(){return{kind:"transformation",type:"trim_start",reference:$i,async:!1,_run(u){return u.value=u.value.trimStart(),u}}}function qi(u){return{kind:"validation",type:"ulid",reference:qi,async:!1,expects:null,requirement:ve,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"ULID",a,s),a}}}function Di(u){return{kind:"validation",type:"url",reference:Di,async:!1,expects:null,requirement(a){try{return new URL(a),!0}catch{return!1}},message:u,_run(a,s){return a.typed&&!this.requirement(a.value)&&x(this,"URL",a,s),a}}}function Li(u){return{kind:"validation",type:"uuid",reference:Li,async:!1,expects:null,requirement:we,message:u,_run(a,s){return a.typed&&!this.requirement.test(a.value)&&x(this,"UUID",a,s),a}}}function Mi(u,a){return{kind:"validation",type:"value",reference:Mi,async:!1,expects:u instanceof Date?u.toJSON():he(u),requirement:u,message:a,_run(s,l){return s.typed&&!(this.requirement<=s.value&&this.requirement>=s.value)&&x(this,"value",s,l,{received:s.value instanceof Date?s.value.toJSON():he(s.value)}),s}}}function Bl(u,a){return{...u,_run(s,l){return u._run(s,{...l,...a})}}}function ut(u,a,s){return typeof u.fallback=="function"?u.fallback(a,s):u.fallback}function Vl(u,a){return{...u,fallback:a,_run(s,l){const d=u._run(s,l);return d.issues?{typed:!0,value:ut(this,d,l)}:d}}}function Hl(u,a){return{...u,fallback:a,async:!0,async _run(s,l){const d=await u._run(s,l);return d.issues?{typed:!0,value:await ut(this,d,l)}:d}}}function Jl(u){const a={};for(const s of u)if(s.path){const l=os(s);l?(a.nested||(a.nested={}),a.nested[l]?a.nested[l].push(s.message):a.nested[l]=[s.message]):a.other?a.other.push(s.message):a.other=[s.message]}else a.root?a.root.push(s.message):a.root=[s.message];return a}function Kl(u,a){return{...u,_run(s,l){const d=s.issues&&[...s.issues];if(u._run(s,l),s.issues){for(const v of s.issues)if(!(d!=null&&d.includes(v))){let _=s.value;for(const g of a){const m=_[g],w={type:"unknown",origin:"value",input:_,key:g,value:m};if(v.path?v.path.push(w):v.path=[w],!m)break;_=m}}}return s}}}function Wl(u,a){return{...u,async:!0,async _run(s,l){const d=s.issues&&[...s.issues];if(await u._run(s,l),s.issues){for(const v of s.issues)if(!(d!=null&&d.includes(v))){let _=s.value;for(const g of a){const m=_[g],w={type:"unknown",origin:"value",input:_,key:g,value:m};if(v.path?v.path.push(w):v.path=[w],!m)break;_=m}}}return s}}}function ge(u,a,s){return typeof u.default=="function"?u.default(a,s):u.default}function Nt(u){if("entries"in u){const a={};for(const s in u.entries)a[s]=Nt(u.entries[s]);return a}return"items"in u?u.items.map(Nt):ge(u)}async function Gt(u){return"entries"in u?Object.fromEntries(await Promise.all(Object.entries(u.entries).map(async([a,s])=>[a,await Gt(s)]))):"items"in u?Promise.all(u.items.map(Gt)):ge(u)}function Ft(u){if("entries"in u){const a={};for(const s in u.entries)a[s]=Ft(u.entries[s]);return a}return"items"in u?u.items.map(Ft):ut(u)}async function Bt(u){return"entries"in u?Object.fromEntries(await Promise.all(Object.entries(u.entries).map(async([a,s])=>[a,await Bt(s)]))):"items"in u?Promise.all(u.items.map(Bt)):ut(u)}function Xl(u,a){return!u._run({typed:!1,value:a},{abortEarly:!0}).issues}function Ui(){return{kind:"schema",type:"any",reference:Ui,expects:"any",async:!1,_run(u){return u.typed=!0,u}}}function zi(u,a){return{kind:"schema",type:"array",reference:zi,expects:"Array",async:!1,item:u,message:a,_run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];for(let _=0;_<d.length;_++){const g=d[_],m=this.item._run({typed:!1,value:g},l);if(m.issues){const w={type:"array",origin:"value",input:d,key:_,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),s.value.push(m.value)}}else x(this,"type",s,l);return s}}}function Ni(u,a){return{kind:"schema",type:"array",reference:Ni,expects:"Array",async:!0,item:u,message:a,async _run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];const _=await Promise.all(d.map(g=>this.item._run({typed:!1,value:g},l)));for(let g=0;g<_.length;g++){const m=_[g];if(m.issues){const w={type:"array",origin:"value",input:d,key:g,value:d[g]};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),s.value.push(m.value)}}else x(this,"type",s,l);return s}}}function Gi(u){return{kind:"schema",type:"bigint",reference:Gi,expects:"bigint",async:!1,message:u,_run(a,s){return typeof a.value=="bigint"?a.typed=!0:x(this,"type",a,s),a}}}function Fi(u){return{kind:"schema",type:"blob",reference:Fi,expects:"Blob",async:!1,message:u,_run(a,s){return a.value instanceof Blob?a.typed=!0:x(this,"type",a,s),a}}}function Bi(u){return{kind:"schema",type:"boolean",reference:Bi,expects:"boolean",async:!1,message:u,_run(a,s){return typeof a.value=="boolean"?a.typed=!0:x(this,"type",a,s),a}}}function Vi(u,a){return{kind:"schema",type:"custom",reference:Vi,expects:"unknown",async:!1,check:u,message:a,_run(s,l){return this.check(s.value)?s.typed=!0:x(this,"type",s,l),s}}}function Hi(u,a){return{kind:"schema",type:"custom",reference:Hi,expects:"unknown",async:!0,check:u,message:a,async _run(s,l){return await this.check(s.value)?s.typed=!0:x(this,"type",s,l),s}}}function Ji(u){return{kind:"schema",type:"date",reference:Ji,expects:"Date",async:!1,message:u,_run(a,s){return a.value instanceof Date?isNaN(a.value)?x(this,"type",a,s,{received:'"Invalid Date"'}):a.typed=!0:x(this,"type",a,s),a}}}function Vt(u,a){const s=Object.entries(u).filter(([l])=>isNaN(+l)).map(([,l])=>l);return{kind:"schema",type:"enum",reference:Vt,expects:ke(s.map(he),"|"),async:!1,enum:u,options:s,message:a,_run(l,d){return this.options.includes(l.value)?l.typed=!0:x(this,"type",l,d),l}}}function Ki(u){return{kind:"schema",type:"file",reference:Ki,expects:"File",async:!1,message:u,_run(a,s){return a.value instanceof File?a.typed=!0:x(this,"type",a,s),a}}}function Ht(u){return{kind:"schema",type:"function",reference:Ht,expects:"Function",async:!1,message:u,_run(a,s){return typeof a.value=="function"?a.typed=!0:x(this,"type",a,s),a}}}function Wi(u,a){return{kind:"schema",type:"instance",reference:Wi,expects:u.name,async:!1,class:u,message:a,_run(s,l){return s.value instanceof this.class?s.typed=!0:x(this,"type",s,l),s}}}function xt(u,a){if(typeof u==typeof a){if(u===a||u instanceof Date&&a instanceof Date&&+u==+a)return{value:u};if(u&&a&&u.constructor===Object&&a.constructor===Object){for(const s in a)if(s in u){const l=xt(u[s],a[s]);if(l.issue)return l;u[s]=l.value}else u[s]=a[s];return{value:u}}if(Array.isArray(u)&&Array.isArray(a)&&u.length===a.length){for(let s=0;s<u.length;s++){const l=xt(u[s],a[s]);if(l.issue)return l;u[s]=l.value}return{value:u}}}return{issue:!0}}function Xi(u,a){return{kind:"schema",type:"intersect",reference:Xi,expects:ke(u.map(s=>s.expects),"&"),async:!1,options:u,message:a,_run(s,l){if(this.options.length){const d=s.value;let v;s.typed=!0;for(const _ of this.options){const g=_._run({typed:!1,value:d},l);if(g.issues&&(s.issues?s.issues.push(...g.issues):s.issues=g.issues,l.abortEarly)){s.typed=!1;break}g.typed||(s.typed=!1),s.typed&&(v?v.push(g.value):v=[g.value])}if(s.typed){s.value=v[0];for(let _=1;_<v.length;_++){const g=xt(s.value,v[_]);if(g.issue){x(this,"type",s,l,{received:"unknown"});break}s.value=g.value}}}else x(this,"type",s,l);return s}}}function Qi(u,a){return{kind:"schema",type:"intersect",reference:Qi,expects:ke(u.map(s=>s.expects),"&"),async:!0,options:u,message:a,async _run(s,l){if(this.options.length){const d=s.value;let v;s.typed=!0;const _=await Promise.all(this.options.map(g=>g._run({typed:!1,value:d},l)));for(const g of _){if(g.issues&&(s.issues?s.issues.push(...g.issues):s.issues=g.issues,l.abortEarly)){s.typed=!1;break}g.typed||(s.typed=!1),s.typed&&(v?v.push(g.value):v=[g.value])}if(s.typed){s.value=v[0];for(let g=1;g<v.length;g++){const m=xt(s.value,v[g]);if(m.issue){x(this,"type",s,l,{received:"unknown"});break}s.value=m.value}}}else x(this,"type",s,l);return s}}}function Zi(u){return{kind:"schema",type:"lazy",reference:Zi,expects:"unknown",async:!1,getter:u,_run(a,s){return this.getter(a.value)._run(a,s)}}}function Yi(u){return{kind:"schema",type:"lazy",reference:Yi,expects:"unknown",async:!0,getter:u,async _run(a,s){return(await this.getter(a.value))._run(a,s)}}}function eo(u,a){return{kind:"schema",type:"literal",reference:eo,expects:he(u),async:!1,literal:u,message:a,_run(s,l){return s.value===this.literal?s.typed=!0:x(this,"type",s,l),s}}}function to(u,a){return{kind:"schema",type:"loose_object",reference:to,expects:"Object",async:!1,entries:u,message:a,_run(s,l){var v;const d=s.value;if(d&&typeof d=="object"){s.typed=!0,s.value={};for(const _ in this.entries){const g=d[_],m=this.entries[_]._run({typed:!1,value:g},l);if(m.issues){const w={type:"object",origin:"value",input:d,key:_,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),(m.value!==void 0||_ in d)&&(s.value[_]=m.value)}if(!s.issues||!l.abortEarly)for(const _ in d)De(d,_)&&!(_ in this.entries)&&(s.value[_]=d[_])}else x(this,"type",s,l);return s}}}function ro(u,a){return{kind:"schema",type:"loose_object",reference:ro,expects:"Object",async:!0,entries:u,message:a,async _run(s,l){var v;const d=s.value;if(d&&typeof d=="object"){s.typed=!0,s.value={};const _=await Promise.all(Object.entries(this.entries).map(async([g,m])=>{const w=d[g];return[g,w,await m._run({typed:!1,value:w},l)]}));for(const[g,m,w]of _){if(w.issues){const b={type:"object",origin:"value",input:d,key:g,value:m};for(const A of w.issues)A.path?A.path.unshift(b):A.path=[b],(v=s.issues)==null||v.push(A);if(s.issues||(s.issues=w.issues),l.abortEarly){s.typed=!1;break}}w.typed||(s.typed=!1),(w.value!==void 0||g in d)&&(s.value[g]=w.value)}if(!s.issues||!l.abortEarly)for(const g in d)De(d,g)&&!(g in this.entries)&&(s.value[g]=d[g])}else x(this,"type",s,l);return s}}}function no(u,a){return{kind:"schema",type:"loose_tuple",reference:no,expects:"Array",async:!1,items:u,message:a,_run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];for(let _=0;_<this.items.length;_++){const g=d[_],m=this.items[_]._run({typed:!1,value:g},l);if(m.issues){const w={type:"array",origin:"value",input:d,key:_,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),s.value.push(m.value)}if(!s.issues||!l.abortEarly)for(let _=this.items.length;_<d.length;_++)s.value.push(d[_])}else x(this,"type",s,l);return s}}}function so(u,a){return{kind:"schema",type:"loose_tuple",reference:so,expects:"Array",async:!0,items:u,message:a,async _run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];const _=await Promise.all(this.items.map(async(g,m)=>{const w=d[m];return[m,w,await g._run({typed:!1,value:w},l)]}));for(const[g,m,w]of _){if(w.issues){const b={type:"array",origin:"value",input:d,key:g,value:m};for(const A of w.issues)A.path?A.path.unshift(b):A.path=[b],(v=s.issues)==null||v.push(A);if(s.issues||(s.issues=w.issues),l.abortEarly){s.typed=!1;break}}w.typed||(s.typed=!1),s.value.push(w.value)}if(!s.issues||!l.abortEarly)for(let g=this.items.length;g<d.length;g++)s.value.push(d[g])}else x(this,"type",s,l);return s}}}function io(u,a,s){return{kind:"schema",type:"map",reference:io,expects:"Map",async:!1,key:u,value:a,message:s,_run(l,d){var _,g;const v=l.value;if(v instanceof Map){l.typed=!0,l.value=new Map;for(const[m,w]of v){const b=this.key._run({typed:!1,value:m},d);if(b.issues){const R={type:"map",origin:"key",input:v,key:m,value:w};for(const M of b.issues)M.path?M.path.unshift(R):M.path=[R],(_=l.issues)==null||_.push(M);if(l.issues||(l.issues=b.issues),d.abortEarly){l.typed=!1;break}}const A=this.value._run({typed:!1,value:w},d);if(A.issues){const R={type:"map",origin:"value",input:v,key:m,value:w};for(const M of A.issues)M.path?M.path.unshift(R):M.path=[R],(g=l.issues)==null||g.push(M);if(l.issues||(l.issues=A.issues),d.abortEarly){l.typed=!1;break}}(!b.typed||!A.typed)&&(l.typed=!1),l.value.set(b.value,A.value)}}else x(this,"type",l,d);return l}}}function oo(u,a,s){return{kind:"schema",type:"map",reference:oo,expects:"Map",async:!0,key:u,value:a,message:s,async _run(l,d){var _,g;const v=l.value;if(v instanceof Map){l.typed=!0,l.value=new Map;const m=await Promise.all([...v].map(([w,b])=>Promise.all([w,b,this.key._run({typed:!1,value:w},d),this.value._run({typed:!1,value:b},d)])));for(const[w,b,A,R]of m){if(A.issues){const M={type:"map",origin:"key",input:v,key:w,value:b};for(const N of A.issues)N.path?N.path.unshift(M):N.path=[M],(_=l.issues)==null||_.push(N);if(l.issues||(l.issues=A.issues),d.abortEarly){l.typed=!1;break}}if(R.issues){const M={type:"map",origin:"value",input:v,key:w,value:b};for(const N of R.issues)N.path?N.path.unshift(M):N.path=[M],(g=l.issues)==null||g.push(N);if(l.issues||(l.issues=R.issues),d.abortEarly){l.typed=!1;break}}(!A.typed||!R.typed)&&(l.typed=!1),l.value.set(A.value,R.value)}}else x(this,"type",l,d);return l}}}function ao(u){return{kind:"schema",type:"nan",reference:ao,expects:"NaN",async:!1,message:u,_run(a,s){return Number.isNaN(a.value)?a.typed=!0:x(this,"type",a,s),a}}}function uo(u){return{kind:"schema",type:"never",reference:uo,expects:"never",async:!1,message:u,_run(a,s){return x(this,"type",a,s),a}}}function lo(u,a){return{kind:"schema",type:"non_nullable",reference:lo,expects:"!null",async:!1,wrapped:u,message:a,_run(s,l){return s.value===null?(x(this,"type",s,l),s):this.wrapped._run(s,l)}}}function co(u,a){return{kind:"schema",type:"non_nullable",reference:co,expects:"!null",async:!0,wrapped:u,message:a,async _run(s,l){return s.value===null?(x(this,"type",s,l),s):this.wrapped._run(s,l)}}}function ho(u,a){return{kind:"schema",type:"non_nullish",reference:ho,expects:"(!null & !undefined)",async:!1,wrapped:u,message:a,_run(s,l){return s.value===null||s.value===void 0?(x(this,"type",s,l),s):this.wrapped._run(s,l)}}}function fo(u,a){return{kind:"schema",type:"non_nullish",reference:fo,expects:"(!null & !undefined)",async:!0,wrapped:u,message:a,async _run(s,l){return s.value===null||s.value===void 0?(x(this,"type",s,l),s):this.wrapped._run(s,l)}}}function Jt(u,a){return{kind:"schema",type:"non_optional",reference:Jt,expects:"!undefined",async:!1,wrapped:u,message:a,_run(s,l){return s.value===void 0?(x(this,"type",s,l),s):this.wrapped._run(s,l)}}}function Kt(u,a){return{kind:"schema",type:"non_optional",reference:Kt,expects:"!undefined",async:!0,wrapped:u,message:a,async _run(s,l){return s.value===void 0?(x(this,"type",s,l),s):this.wrapped._run(s,l)}}}function Wt(u){return{kind:"schema",type:"null",reference:Wt,expects:"null",async:!1,message:u,_run(a,s){return a.value===null?a.typed=!0:x(this,"type",a,s),a}}}function po(u,...a){const s={kind:"schema",type:"nullable",reference:po,expects:`(${u.expects} | null)`,async:!1,wrapped:u,_run(l,d){return l.value===null&&("default"in this&&(l.value=ge(this,l,d)),l.value===null)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function yo(u,...a){const s={kind:"schema",type:"nullable",reference:yo,expects:`(${u.expects} | null)`,async:!0,wrapped:u,async _run(l,d){return l.value===null&&("default"in this&&(l.value=await ge(this,l,d)),l.value===null)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function vo(u,...a){const s={kind:"schema",type:"nullish",reference:vo,expects:`(${u.expects} | null | undefined)`,async:!1,wrapped:u,_run(l,d){return(l.value===null||l.value===void 0)&&("default"in this&&(l.value=ge(this,l,d)),l.value===null||l.value===void 0)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function mo(u,...a){const s={kind:"schema",type:"nullish",reference:mo,expects:`(${u.expects} | null | undefined)`,async:!0,wrapped:u,async _run(l,d){return(l.value===null||l.value===void 0)&&("default"in this&&(l.value=await ge(this,l,d)),l.value===null||l.value===void 0)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function _o(u){return{kind:"schema",type:"number",reference:_o,expects:"number",async:!1,message:u,_run(a,s){return typeof a.value=="number"&&!isNaN(a.value)?a.typed=!0:x(this,"type",a,s),a}}}function go(u,a){return{kind:"schema",type:"object",reference:go,expects:"Object",async:!1,entries:u,message:a,_run(s,l){var v;const d=s.value;if(d&&typeof d=="object"){s.typed=!0,s.value={};for(const _ in this.entries){const g=d[_],m=this.entries[_]._run({typed:!1,value:g},l);if(m.issues){const w={type:"object",origin:"value",input:d,key:_,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),(m.value!==void 0||_ in d)&&(s.value[_]=m.value)}}else x(this,"type",s,l);return s}}}function bo(u,a){return{kind:"schema",type:"object",reference:bo,expects:"Object",async:!0,entries:u,message:a,async _run(s,l){var v;const d=s.value;if(d&&typeof d=="object"){s.typed=!0,s.value={};const _=await Promise.all(Object.entries(this.entries).map(async([g,m])=>{const w=d[g];return[g,w,await m._run({typed:!1,value:w},l)]}));for(const[g,m,w]of _){if(w.issues){const b={type:"object",origin:"value",input:d,key:g,value:m};for(const A of w.issues)A.path?A.path.unshift(b):A.path=[b],(v=s.issues)==null||v.push(A);if(s.issues||(s.issues=w.issues),l.abortEarly){s.typed=!1;break}}w.typed||(s.typed=!1),(w.value!==void 0||g in d)&&(s.value[g]=w.value)}}else x(this,"type",s,l);return s}}}function wo(u,a,s){return{kind:"schema",type:"object_with_rest",reference:wo,expects:"Object",async:!1,entries:u,rest:a,message:s,_run(l,d){var _,g;const v=l.value;if(v&&typeof v=="object"){l.typed=!0,l.value={};for(const m in this.entries){const w=v[m],b=this.entries[m]._run({typed:!1,value:w},d);if(b.issues){const A={type:"object",origin:"value",input:v,key:m,value:w};for(const R of b.issues)R.path?R.path.unshift(A):R.path=[A],(_=l.issues)==null||_.push(R);if(l.issues||(l.issues=b.issues),d.abortEarly){l.typed=!1;break}}b.typed||(l.typed=!1),(b.value!==void 0||m in v)&&(l.value[m]=b.value)}if(!l.issues||!d.abortEarly){for(const m in v)if(De(v,m)&&!(m in this.entries)){const w=v[m],b=this.rest._run({typed:!1,value:w},d);if(b.issues){const A={type:"object",origin:"value",input:v,key:m,value:w};for(const R of b.issues)R.path?R.path.unshift(A):R.path=[A],(g=l.issues)==null||g.push(R);if(l.issues||(l.issues=b.issues),d.abortEarly){l.typed=!1;break}}b.typed||(l.typed=!1),l.value[m]=b.value}}}else x(this,"type",l,d);return l}}}function ko(u,a,s){return{kind:"schema",type:"object_with_rest",reference:ko,expects:"Object",async:!0,entries:u,rest:a,message:s,async _run(l,d){var _,g;const v=l.value;if(v&&typeof v=="object"){l.typed=!0,l.value={};const[m,w]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([b,A])=>{const R=v[b];return[b,R,await A._run({typed:!1,value:R},d)]})),Promise.all(Object.entries(v).filter(([b])=>De(v,b)&&!(b in this.entries)).map(async([b,A])=>[b,A,await this.rest._run({typed:!1,value:A},d)]))]);for(const[b,A,R]of m){if(R.issues){const M={type:"object",origin:"value",input:v,key:b,value:A};for(const N of R.issues)N.path?N.path.unshift(M):N.path=[M],(_=l.issues)==null||_.push(N);if(l.issues||(l.issues=R.issues),d.abortEarly){l.typed=!1;break}}R.typed||(l.typed=!1),(R.value!==void 0||b in v)&&(l.value[b]=R.value)}if(!l.issues||!d.abortEarly)for(const[b,A,R]of w){if(R.issues){const M={type:"object",origin:"value",input:v,key:b,value:A};for(const N of R.issues)N.path?N.path.unshift(M):N.path=[M],(g=l.issues)==null||g.push(N);if(l.issues||(l.issues=R.issues),d.abortEarly){l.typed=!1;break}}R.typed||(l.typed=!1),l.value[b]=R.value}}else x(this,"type",l,d);return l}}}function Xt(u,...a){const s={kind:"schema",type:"optional",reference:Xt,expects:`(${u.expects} | undefined)`,async:!1,wrapped:u,_run(l,d){return l.value===void 0&&("default"in this&&(l.value=ge(this,l,d)),l.value===void 0)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function Qt(u,...a){const s={kind:"schema",type:"optional",reference:Qt,expects:`(${u.expects} | undefined)`,async:!0,wrapped:u,async _run(l,d){return l.value===void 0&&("default"in this&&(l.value=await ge(this,l,d)),l.value===void 0)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function Zt(u,a){return{kind:"schema",type:"picklist",reference:Zt,expects:ke(u.map(he),"|"),async:!1,options:u,message:a,_run(s,l){return this.options.includes(s.value)?s.typed=!0:x(this,"type",s,l),s}}}function xo(u){return{kind:"schema",type:"promise",reference:xo,expects:"Promise",async:!1,message:u,_run(a,s){return a.value instanceof Promise?a.typed=!0:x(this,"type",a,s),a}}}function Eo(u,a,s){return{kind:"schema",type:"record",reference:Eo,expects:"Object",async:!1,key:u,value:a,message:s,_run(l,d){var _,g;const v=l.value;if(v&&typeof v=="object"){l.typed=!0,l.value={};for(const m in v)if(De(v,m)){const w=v[m],b=this.key._run({typed:!1,value:m},d);if(b.issues){const R={type:"object",origin:"key",input:v,key:m,value:w};for(const M of b.issues)M.path=[R],(_=l.issues)==null||_.push(M);if(l.issues||(l.issues=b.issues),d.abortEarly){l.typed=!1;break}}const A=this.value._run({typed:!1,value:w},d);if(A.issues){const R={type:"object",origin:"value",input:v,key:m,value:w};for(const M of A.issues)M.path?M.path.unshift(R):M.path=[R],(g=l.issues)==null||g.push(M);if(l.issues||(l.issues=A.issues),d.abortEarly){l.typed=!1;break}}(!b.typed||!A.typed)&&(l.typed=!1),b.typed&&(l.value[b.value]=A.value)}}else x(this,"type",l,d);return l}}}function So(u,a,s){return{kind:"schema",type:"record",reference:So,expects:"Object",async:!0,key:u,value:a,message:s,async _run(l,d){var _,g;const v=l.value;if(v&&typeof v=="object"){l.typed=!0,l.value={};const m=await Promise.all(Object.entries(v).filter(([w])=>De(v,w)).map(([w,b])=>Promise.all([w,b,this.key._run({typed:!1,value:w},d),this.value._run({typed:!1,value:b},d)])));for(const[w,b,A,R]of m){if(A.issues){const M={type:"object",origin:"key",input:v,key:w,value:b};for(const N of A.issues)N.path=[M],(_=l.issues)==null||_.push(N);if(l.issues||(l.issues=A.issues),d.abortEarly){l.typed=!1;break}}if(R.issues){const M={type:"object",origin:"value",input:v,key:w,value:b};for(const N of R.issues)N.path?N.path.unshift(M):N.path=[M],(g=l.issues)==null||g.push(N);if(l.issues||(l.issues=R.issues),d.abortEarly){l.typed=!1;break}}(!A.typed||!R.typed)&&(l.typed=!1),A.typed&&(l.value[A.value]=R.value)}}else x(this,"type",l,d);return l}}}function Ao(u,a){return{kind:"schema",type:"set",reference:Ao,expects:"Set",async:!1,value:u,message:a,_run(s,l){var v;const d=s.value;if(d instanceof Set){s.typed=!0,s.value=new Set;for(const _ of d){const g=this.value._run({typed:!1,value:_},l);if(g.issues){const m={type:"set",origin:"value",input:d,key:null,value:_};for(const w of g.issues)w.path?w.path.unshift(m):w.path=[m],(v=s.issues)==null||v.push(w);if(s.issues||(s.issues=g.issues),l.abortEarly){s.typed=!1;break}}g.typed||(s.typed=!1),s.value.add(g.value)}}else x(this,"type",s,l);return s}}}function Po(u,a){return{kind:"schema",type:"set",reference:Po,expects:"Set",async:!0,value:u,message:a,async _run(s,l){var v;const d=s.value;if(d instanceof Set){s.typed=!0,s.value=new Set;const _=await Promise.all([...d].map(async g=>[g,await this.value._run({typed:!1,value:g},l)]));for(const[g,m]of _){if(m.issues){const w={type:"set",origin:"value",input:d,key:null,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),s.value.add(m.value)}}else x(this,"type",s,l);return s}}}function To(u,a){return{kind:"schema",type:"strict_object",reference:To,expects:"Object",async:!1,entries:u,message:a,_run(s,l){var v;const d=s.value;if(d&&typeof d=="object"){s.typed=!0,s.value={};for(const _ in this.entries){const g=d[_],m=this.entries[_]._run({typed:!1,value:g},l);if(m.issues){const w={type:"object",origin:"value",input:d,key:_,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),(m.value!==void 0||_ in d)&&(s.value[_]=m.value)}if(!s.issues||!l.abortEarly){for(const _ in d)if(!(_ in this.entries)){const g=d[_];x(this,"type",s,l,{input:g,expected:"never",path:[{type:"object",origin:"value",input:d,key:_,value:g}]});break}}}else x(this,"type",s,l);return s}}}function Ro(u,a){return{kind:"schema",type:"strict_object",reference:Ro,expects:"Object",async:!0,entries:u,message:a,async _run(s,l){var v;const d=s.value;if(d&&typeof d=="object"){s.typed=!0,s.value={};const _=await Promise.all(Object.entries(this.entries).map(async([g,m])=>{const w=d[g];return[g,w,await m._run({typed:!1,value:w},l)]}));for(const[g,m,w]of _){if(w.issues){const b={type:"object",origin:"value",input:d,key:g,value:m};for(const A of w.issues)A.path?A.path.unshift(b):A.path=[b],(v=s.issues)==null||v.push(A);if(s.issues||(s.issues=w.issues),l.abortEarly){s.typed=!1;break}}w.typed||(s.typed=!1),(w.value!==void 0||g in d)&&(s.value[g]=w.value)}if(!s.issues||!l.abortEarly){for(const g in d)if(!(g in this.entries)){const m=d[g];x(this,"type",s,l,{input:m,expected:"never",path:[{type:"object",origin:"value",input:d,key:g,value:m}]});break}}}else x(this,"type",s,l);return s}}}function Oo(u,a){return{kind:"schema",type:"strict_tuple",reference:Oo,expects:"Array",async:!1,items:u,message:a,_run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];for(let _=0;_<this.items.length;_++){const g=d[_],m=this.items[_]._run({typed:!1,value:g},l);if(m.issues){const w={type:"array",origin:"value",input:d,key:_,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),s.value.push(m.value)}if(!(s.issues&&l.abortEarly)&&this.items.length<d.length){const _=d[u.length];x(this,"type",s,l,{input:_,expected:"never",path:[{type:"array",origin:"value",input:d,key:this.items.length,value:_}]})}}else x(this,"type",s,l);return s}}}function jo(u,a){return{kind:"schema",type:"strict_tuple",reference:jo,expects:"Array",async:!0,items:u,message:a,async _run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];const _=await Promise.all(this.items.map(async(g,m)=>{const w=d[m];return[m,w,await g._run({typed:!1,value:w},l)]}));for(const[g,m,w]of _){if(w.issues){const b={type:"array",origin:"value",input:d,key:g,value:m};for(const A of w.issues)A.path?A.path.unshift(b):A.path=[b],(v=s.issues)==null||v.push(A);if(s.issues||(s.issues=w.issues),l.abortEarly){s.typed=!1;break}}w.typed||(s.typed=!1),s.value.push(w.value)}if(!(s.issues&&l.abortEarly)&&this.items.length<d.length){const g=d[u.length];x(this,"type",s,l,{input:g,expected:"never",path:[{type:"array",origin:"value",input:d,key:this.items.length,value:g}]})}}else x(this,"type",s,l);return s}}}function Io(u){return{kind:"schema",type:"string",reference:Io,expects:"string",async:!1,message:u,_run(a,s){return typeof a.value=="string"?a.typed=!0:x(this,"type",a,s),a}}}function Co(u){return{kind:"schema",type:"symbol",reference:Co,expects:"symbol",async:!1,message:u,_run(a,s){return typeof a.value=="symbol"?a.typed=!0:x(this,"type",a,s),a}}}function $o(u,a){return{kind:"schema",type:"tuple",reference:$o,expects:"Array",async:!1,items:u,message:a,_run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];for(let _=0;_<this.items.length;_++){const g=d[_],m=this.items[_]._run({typed:!1,value:g},l);if(m.issues){const w={type:"array",origin:"value",input:d,key:_,value:g};for(const b of m.issues)b.path?b.path.unshift(w):b.path=[w],(v=s.issues)==null||v.push(b);if(s.issues||(s.issues=m.issues),l.abortEarly){s.typed=!1;break}}m.typed||(s.typed=!1),s.value.push(m.value)}}else x(this,"type",s,l);return s}}}function qo(u,a){return{kind:"schema",type:"tuple",reference:qo,expects:"Array",async:!0,items:u,message:a,async _run(s,l){var v;const d=s.value;if(Array.isArray(d)){s.typed=!0,s.value=[];const _=await Promise.all(this.items.map(async(g,m)=>{const w=d[m];return[m,w,await g._run({typed:!1,value:w},l)]}));for(const[g,m,w]of _){if(w.issues){const b={type:"array",origin:"value",input:d,key:g,value:m};for(const A of w.issues)A.path?A.path.unshift(b):A.path=[b],(v=s.issues)==null||v.push(A);if(s.issues||(s.issues=w.issues),l.abortEarly){s.typed=!1;break}}w.typed||(s.typed=!1),s.value.push(w.value)}}else x(this,"type",s,l);return s}}}function Do(u,a,s){return{kind:"schema",type:"tuple_with_rest",reference:Do,expects:"Array",async:!1,items:u,rest:a,message:s,_run(l,d){var _,g;const v=l.value;if(Array.isArray(v)){l.typed=!0,l.value=[];for(let m=0;m<this.items.length;m++){const w=v[m],b=this.items[m]._run({typed:!1,value:w},d);if(b.issues){const A={type:"array",origin:"value",input:v,key:m,value:w};for(const R of b.issues)R.path?R.path.unshift(A):R.path=[A],(_=l.issues)==null||_.push(R);if(l.issues||(l.issues=b.issues),d.abortEarly){l.typed=!1;break}}b.typed||(l.typed=!1),l.value.push(b.value)}if(!l.issues||!d.abortEarly)for(let m=this.items.length;m<v.length;m++){const w=v[m],b=this.rest._run({typed:!1,value:w},d);if(b.issues){const A={type:"array",origin:"value",input:v,key:m,value:w};for(const R of b.issues)R.path?R.path.unshift(A):R.path=[A],(g=l.issues)==null||g.push(R);if(l.issues||(l.issues=b.issues),d.abortEarly){l.typed=!1;break}}b.typed||(l.typed=!1),l.value.push(b.value)}}else x(this,"type",l,d);return l}}}function Lo(u,a,s){return{kind:"schema",type:"tuple_with_rest",reference:Lo,expects:"Array",async:!0,items:u,rest:a,message:s,async _run(l,d){var _,g;const v=l.value;if(Array.isArray(v)){l.typed=!0,l.value=[];const[m,w]=await Promise.all([Promise.all(this.items.map(async(b,A)=>{const R=v[A];return[A,R,await b._run({typed:!1,value:R},d)]})),Promise.all(v.slice(this.items.length).map(async(b,A)=>[A+this.items.length,b,await this.rest._run({typed:!1,value:b},d)]))]);for(const[b,A,R]of m){if(R.issues){const M={type:"array",origin:"value",input:v,key:b,value:A};for(const N of R.issues)N.path?N.path.unshift(M):N.path=[M],(_=l.issues)==null||_.push(N);if(l.issues||(l.issues=R.issues),d.abortEarly){l.typed=!1;break}}R.typed||(l.typed=!1),l.value.push(R.value)}if(!l.issues||!d.abortEarly)for(const[b,A,R]of w){if(R.issues){const M={type:"array",origin:"value",input:v,key:b,value:A};for(const N of R.issues)N.path?N.path.unshift(M):N.path=[M],(g=l.issues)==null||g.push(N);if(l.issues||(l.issues=R.issues),d.abortEarly){l.typed=!1;break}}R.typed||(l.typed=!1),l.value.push(R.value)}}else x(this,"type",l,d);return l}}}function Yt(u){return{kind:"schema",type:"undefined",reference:Yt,expects:"undefined",async:!1,message:u,_run(a,s){return a.value===void 0?a.typed=!0:x(this,"type",a,s),a}}}function Mo(u,...a){const s={kind:"schema",type:"undefinedable",reference:Mo,expects:`(${u.expects} | undefined)`,async:!1,wrapped:u,_run(l,d){return l.value===void 0&&("default"in this&&(l.value=ge(this,l,d)),l.value===void 0)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function Uo(u,...a){const s={kind:"schema",type:"undefinedable",reference:Uo,expects:`(${u.expects} | undefined)`,async:!0,wrapped:u,async _run(l,d){return l.value===void 0&&("default"in this&&(l.value=await ge(this,l,d)),l.value===void 0)?(l.typed=!0,l):this.wrapped._run(l,d)}};return 0 in a&&(s.default=a[0]),s}function Et(u){let a;if(u)for(const s of u)a?a.push(...s.issues):a=s.issues;return a}function zo(u,a){return{kind:"schema",type:"union",reference:zo,expects:ke(u.map(s=>s.expects),"|"),async:!1,options:u,message:a,_run(s,l){let d,v,_;for(const g of this.options){const m=g._run({typed:!1,value:s.value},l);if(m.typed)if(m.issues)v?v.push(m):v=[m];else{d=m;break}else _?_.push(m):_=[m]}if(d)return d;if(v){if(v.length===1)return v[0];x(this,"type",s,l,{issues:Et(v)}),s.typed=!0}else{if((_==null?void 0:_.length)===1)return _[0];x(this,"type",s,l,{issues:Et(_)})}return s}}}function No(u,a){return{kind:"schema",type:"union",reference:No,expects:ke(u.map(s=>s.expects),"|"),async:!0,options:u,message:a,async _run(s,l){let d,v,_;for(const g of this.options){const m=await g._run({typed:!1,value:s.value},l);if(m.typed)if(m.issues)v?v.push(m):v=[m];else{d=m;break}else _?_.push(m):_=[m]}if(d)return d;if(v){if(v.length===1)return v[0];x(this,"type",s,l,{issues:Et(v)}),s.typed=!0}else{if((_==null?void 0:_.length)===1)return _[0];x(this,"type",s,l,{issues:Et(_)})}return s}}}function Go(){return{kind:"schema",type:"unknown",reference:Go,expects:"unknown",async:!1,_run(u){return u.typed=!0,u}}}function Fo(u,a,s){return{kind:"schema",type:"variant",reference:Fo,expects:"Object",async:!1,key:u,options:a,message:s,_run(l,d){const v=l.value;if(v&&typeof v=="object"){let _,g=0,m=this.key,w=[];const b=(A,R)=>{for(const M of A.options){if(M.type==="variant")b(M,new Set(R).add(M.key));else{let N=!0,Ee=0;for(const Y of R){if(M.entries[Y]._run({typed:!1,value:v[Y]},d).issues){N=!1,m!==Y&&(g<Ee||g===Ee&&Y in v&&!(m in v))&&(g=Ee,m=Y,w=[]),m===Y&&w.push(M.entries[Y].expects);break}Ee++}if(N){const Y=M._run({typed:!1,value:v},d);(!_||!_.typed&&Y.typed)&&(_=Y)}}if(_&&!_.issues)break}};if(b(this,new Set([this.key])),_)return _;x(this,"type",l,d,{input:v[m],expected:ke(w,"|"),path:[{type:"object",origin:"value",input:v,key:m,value:v[m]}]})}else x(this,"type",l,d);return l}}}function Bo(u,a,s){return{kind:"schema",type:"variant",reference:Bo,expects:"Object",async:!0,key:u,options:a,message:s,async _run(l,d){const v=l.value;if(v&&typeof v=="object"){let _,g=0,m=this.key,w=[];const b=async(A,R)=>{for(const M of A.options){if(M.type==="variant")await b(M,new Set(R).add(M.key));else{let N=!0,Ee=0;for(const Y of R){if((await M.entries[Y]._run({typed:!1,value:v[Y]},d)).issues){N=!1,m!==Y&&(g<Ee||g===Ee&&Y in v&&!(m in v))&&(g=Ee,m=Y,w=[]),m===Y&&w.push(M.entries[Y].expects);break}Ee++}if(N){const Y=await M._run({typed:!1,value:v},d);(!_||!_.typed&&Y.typed)&&(_=Y)}}if(_&&!_.issues)break}};if(await b(this,new Set([this.key])),_)return _;x(this,"type",l,d,{input:v[m],expected:ke(w,"|"),path:[{type:"object",origin:"value",input:v,key:m,value:v[m]}]})}else x(this,"type",l,d);return l}}}function er(u){return{kind:"schema",type:"void",reference:er,expects:"void",async:!1,message:u,_run(a,s){return a.value===void 0?a.typed=!0:x(this,"type",a,s),a}}}function Ql(u,a){return Zt(Object.keys(u.entries),a)}function Zl(u,a){const s={...u.entries};for(const l of a)delete s[l];return{...u,entries:s}}function Vo(u,a,s){const l=u._run({typed:!1,value:a},Te(s));if(l.issues)throw new kt(l.issues);return l.value}async function Ho(u,a,s){const l=await u._run({typed:!1,value:a},Te(s));if(l.issues)throw new kt(l.issues);return l.value}function Yl(u,a){const s=l=>Vo(u,l,a);return s.schema=u,s.config=a,s}function ec(u,a){const s=l=>Ho(u,l,a);return s.schema=u,s.config=a,s}function tc(u,a){const s={};for(const l in u.entries)s[l]=!a||a.includes(l)?Xt(u.entries[l]):u.entries[l];return{...u,entries:s}}function rc(u,a){const s={};for(const l in u.entries)s[l]=!a||a.includes(l)?Qt(u.entries[l]):u.entries[l];return{...u,entries:s}}function nc(u,a){const s={};for(const l of a)s[l]=u.entries[l];return{...u,entries:s}}function sc(...u){return{...u[0],pipe:u,_run(a,s){for(const l of u)if(l.kind!=="metadata"){if(a.issues&&(l.kind==="schema"||l.kind==="transformation")){a.typed=!1;break}(!a.issues||!s.abortEarly&&!s.abortPipeEarly)&&(a=l._run(a,s))}return a}}}function ic(...u){return{...u[0],pipe:u,async:!0,async _run(a,s){for(const l of u)if(l.kind!=="metadata"){if(a.issues&&(l.kind==="schema"||l.kind==="transformation")){a.typed=!1;break}(!a.issues||!s.abortEarly&&!s.abortPipeEarly)&&(a=await l._run(a,s))}return a}}}function oc(u,a,s){const l=Array.isArray(a)?a:void 0,d=Array.isArray(a)?s:a,v={};for(const _ in u.entries)v[_]=!l||l.includes(_)?Jt(u.entries[_],d):u.entries[_];return{...u,entries:v}}function ac(u,a,s){const l=Array.isArray(a)?a:void 0,d=Array.isArray(a)?s:a,v={};for(const _ in u.entries)v[_]=!l||l.includes(_)?Kt(u.entries[_],d):u.entries[_];return{...u,entries:v}}function Jo(u,a,s){const l=u._run({typed:!1,value:a},Te(s));return{typed:l.typed,success:!l.issues,output:l.value,issues:l.issues}}async function Ko(u,a,s){const l=await u._run({typed:!1,value:a},Te(s));return{typed:l.typed,success:!l.issues,output:l.value,issues:l.issues}}function uc(u,a){const s=l=>Jo(u,l,a);return s.schema=u,s.config=a,s}function lc(u,a){const s=l=>Ko(u,l,a);return s.schema=u,s.config=a,s}function cc(u){return u.wrapped}return cr}var hr,Ta;function gt(){if(Ta)return hr;Ta=1;var n=Array.isArray;return hr=n,hr}var fr,Ra;function fd(){if(Ra)return fr;Ra=1;var n=typeof St=="object"&&St&&St.Object===Object&&St;return fr=n,fr}var dr,Oa;function Yn(){if(Oa)return dr;Oa=1;var n=fd(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return dr=t,dr}var pr,ja;function qt(){if(ja)return pr;ja=1;var n=Yn(),e=n.Symbol;return pr=e,pr}var yr,Ia;function dd(){if(Ia)return yr;Ia=1;var n=qt(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function o(c){var h=t.call(c,i),f=c[i];try{c[i]=void 0;var p=!0}catch{}var y=r.call(c);return p&&(h?c[i]=f:delete c[i]),y}return yr=o,yr}var vr,Ca;function pd(){if(Ca)return vr;Ca=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return vr=t,vr}var mr,$a;function es(){if($a)return mr;$a=1;var n=qt(),e=dd(),t=pd(),r="[object Null]",i="[object Undefined]",o=n?n.toStringTag:void 0;function c(h){return h==null?h===void 0?i:r:o&&o in Object(h)?e(h):t(h)}return mr=c,mr}var _r,qa;function ts(){if(qa)return _r;qa=1;function n(e){return e!=null&&typeof e=="object"}return _r=n,_r}var gr,Da;function rs(){if(Da)return gr;Da=1;var n=es(),e=ts(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return gr=r,gr}var br,La;function yd(){if(La)return br;La=1;var n=gt(),e=rs(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,c){if(n(o))return!1;var h=typeof o;return h=="number"||h=="symbol"||h=="boolean"||o==null||e(o)?!0:r.test(o)||!t.test(o)||c!=null&&o in Object(c)}return br=i,br}var wr,Ma;function ns(){if(Ma)return wr;Ma=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return wr=n,wr}var kr,Ua;function vd(){if(Ua)return kr;Ua=1;var n=es(),e=ns(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function c(h){if(!e(h))return!1;var f=n(h);return f==r||f==i||f==t||f==o}return kr=c,kr}var xr,za;function md(){if(za)return xr;za=1;var n=Yn(),e=n["__core-js_shared__"];return xr=e,xr}var Er,Na;function _d(){if(Na)return Er;Na=1;var n=md(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Er=t,Er}var Sr,Ga;function gd(){if(Ga)return Sr;Ga=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Sr=t,Sr}var Ar,Fa;function bd(){if(Fa)return Ar;Fa=1;var n=vd(),e=_d(),t=ns(),r=gd(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,f=c.toString,p=h.hasOwnProperty,y=RegExp("^"+f.call(p).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function k(E){if(!t(E)||e(E))return!1;var S=n(E)?y:o;return S.test(r(E))}return Ar=k,Ar}var Pr,Ba;function wd(){if(Ba)return Pr;Ba=1;function n(e,t){return e==null?void 0:e[t]}return Pr=n,Pr}var Tr,Va;function ss(){if(Va)return Tr;Va=1;var n=bd(),e=wd();function t(r,i){var o=e(r,i);return n(o)?o:void 0}return Tr=t,Tr}var Rr,Ha;function Dt(){if(Ha)return Rr;Ha=1;var n=ss(),e=n(Object,"create");return Rr=e,Rr}var Or,Ja;function kd(){if(Ja)return Or;Ja=1;var n=Dt();function e(){this.__data__=n?n(null):{},this.size=0}return Or=e,Or}var jr,Ka;function xd(){if(Ka)return jr;Ka=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return jr=n,jr}var Ir,Wa;function Ed(){if(Wa)return Ir;Wa=1;var n=Dt(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(o){var c=this.__data__;if(n){var h=c[o];return h===e?void 0:h}return r.call(c,o)?c[o]:void 0}return Ir=i,Ir}var Cr,Xa;function Sd(){if(Xa)return Cr;Xa=1;var n=Dt(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var o=this.__data__;return n?o[i]!==void 0:t.call(o,i)}return Cr=r,Cr}var $r,Qa;function Ad(){if(Qa)return $r;Qa=1;var n=Dt(),e="__lodash_hash_undefined__";function t(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=n&&i===void 0?e:i,this}return $r=t,$r}var qr,Za;function Pd(){if(Za)return qr;Za=1;var n=kd(),e=xd(),t=Ed(),r=Sd(),i=Ad();function o(c){var h=-1,f=c==null?0:c.length;for(this.clear();++h<f;){var p=c[h];this.set(p[0],p[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,qr=o,qr}var Dr,Ya;function Td(){if(Ya)return Dr;Ya=1;function n(){this.__data__=[],this.size=0}return Dr=n,Dr}var Lr,eu;function Rl(){if(eu)return Lr;eu=1;function n(e,t){return e===t||e!==e&&t!==t}return Lr=n,Lr}var Mr,tu;function Lt(){if(tu)return Mr;tu=1;var n=Rl();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return Mr=e,Mr}var Ur,ru;function Rd(){if(ru)return Ur;ru=1;var n=Lt(),e=Array.prototype,t=e.splice;function r(i){var o=this.__data__,c=n(o,i);if(c<0)return!1;var h=o.length-1;return c==h?o.pop():t.call(o,c,1),--this.size,!0}return Ur=r,Ur}var zr,nu;function Od(){if(nu)return zr;nu=1;var n=Lt();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return zr=e,zr}var Nr,su;function jd(){if(su)return Nr;su=1;var n=Lt();function e(t){return n(this.__data__,t)>-1}return Nr=e,Nr}var Gr,iu;function Id(){if(iu)return Gr;iu=1;var n=Lt();function e(t,r){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,r])):i[o][1]=r,this}return Gr=e,Gr}var Fr,ou;function Cd(){if(ou)return Fr;ou=1;var n=Td(),e=Rd(),t=Od(),r=jd(),i=Id();function o(c){var h=-1,f=c==null?0:c.length;for(this.clear();++h<f;){var p=c[h];this.set(p[0],p[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,Fr=o,Fr}var Br,au;function $d(){if(au)return Br;au=1;var n=ss(),e=Yn(),t=n(e,"Map");return Br=t,Br}var Vr,uu;function qd(){if(uu)return Vr;uu=1;var n=Pd(),e=Cd(),t=$d();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Vr=r,Vr}var Hr,lu;function Dd(){if(lu)return Hr;lu=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Hr=n,Hr}var Jr,cu;function Mt(){if(cu)return Jr;cu=1;var n=Dd();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Jr=e,Jr}var Kr,hu;function Ld(){if(hu)return Kr;hu=1;var n=Mt();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return Kr=e,Kr}var Wr,fu;function Md(){if(fu)return Wr;fu=1;var n=Mt();function e(t){return n(this,t).get(t)}return Wr=e,Wr}var Xr,du;function Ud(){if(du)return Xr;du=1;var n=Mt();function e(t){return n(this,t).has(t)}return Xr=e,Xr}var Qr,pu;function zd(){if(pu)return Qr;pu=1;var n=Mt();function e(t,r){var i=n(this,t),o=i.size;return i.set(t,r),this.size+=i.size==o?0:1,this}return Qr=e,Qr}var Zr,yu;function Nd(){if(yu)return Zr;yu=1;var n=qd(),e=Ld(),t=Md(),r=Ud(),i=zd();function o(c){var h=-1,f=c==null?0:c.length;for(this.clear();++h<f;){var p=c[h];this.set(p[0],p[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,Zr=o,Zr}var Yr,vu;function Gd(){if(vu)return Yr;vu=1;var n=Nd(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var c=arguments,h=i?i.apply(this,c):c[0],f=o.cache;if(f.has(h))return f.get(h);var p=r.apply(this,c);return o.cache=f.set(h,p)||f,p};return o.cache=new(t.Cache||n),o}return t.Cache=n,Yr=t,Yr}var en,mu;function Fd(){if(mu)return en;mu=1;var n=Gd(),e=500;function t(r){var i=n(r,function(c){return o.size===e&&o.clear(),c}),o=i.cache;return i}return en=t,en}var tn,_u;function Bd(){if(_u)return tn;_u=1;var n=Fd(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(c,h,f,p){o.push(f?p.replace(t,"$1"):h||c)}),o});return tn=r,tn}var rn,gu;function Vd(){if(gu)return rn;gu=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=t(e[r],r,e);return o}return rn=n,rn}var nn,bu;function Hd(){if(bu)return nn;bu=1;var n=qt(),e=Vd(),t=gt(),r=rs(),i=n?n.prototype:void 0,o=i?i.toString:void 0;function c(h){if(typeof h=="string")return h;if(t(h))return e(h,c)+"";if(r(h))return o?o.call(h):"";var f=h+"";return f=="0"&&1/h==-1/0?"-0":f}return nn=c,nn}var sn,wu;function Jd(){if(wu)return sn;wu=1;var n=Hd();function e(t){return t==null?"":n(t)}return sn=e,sn}var on,ku;function Ut(){if(ku)return on;ku=1;var n=gt(),e=yd(),t=Bd(),r=Jd();function i(o,c){return n(o)?o:e(o,c)?[o]:t(r(o))}return on=i,on}var an,xu;function is(){if(xu)return an;xu=1;var n=rs();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return an=e,an}var un,Eu;function Kd(){if(Eu)return un;Eu=1;var n=Ut(),e=is();function t(r,i){i=n(i,r);for(var o=0,c=i.length;r!=null&&o<c;)r=r[e(i[o++])];return o&&o==c?r:void 0}return un=t,un}var ln,Su;function Ol(){if(Su)return ln;Su=1;var n=ss(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return ln=e,ln}var cn,Au;function Wd(){if(Au)return cn;Au=1;var n=Ol();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return cn=e,cn}var hn,Pu;function Xd(){if(Pu)return hn;Pu=1;var n=Wd(),e=Rl(),t=Object.prototype,r=t.hasOwnProperty;function i(o,c,h){var f=o[c];(!(r.call(o,c)&&e(f,h))||h===void 0&&!(c in o))&&n(o,c,h)}return hn=i,hn}var fn,Tu;function jl(){if(Tu)return fn;Tu=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var o=typeof r;return i=i??n,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return fn=t,fn}var dn,Ru;function Qd(){if(Ru)return dn;Ru=1;var n=Xd(),e=Ut(),t=jl(),r=ns(),i=is();function o(c,h,f,p){if(!r(c))return c;h=e(h,c);for(var y=-1,k=h.length,E=k-1,S=c;S!=null&&++y<k;){var T=i(h[y]),L=f;if(T==="__proto__"||T==="constructor"||T==="prototype")return c;if(y!=E){var q=S[T];L=p?p(q,T,S):void 0,L===void 0&&(L=r(q)?q:t(h[y+1])?[]:{})}n(S,T,L),S=S[T]}return c}return dn=o,dn}var pn,Ou;function Zd(){if(Ou)return pn;Ou=1;var n=Kd(),e=Qd(),t=Ut();function r(i,o,c){for(var h=-1,f=o.length,p={};++h<f;){var y=o[h],k=n(i,y);c(k,y)&&e(p,t(y,i),k)}return p}return pn=r,pn}var yn,ju;function Yd(){if(ju)return yn;ju=1;function n(e,t){return e!=null&&t in Object(e)}return yn=n,yn}var vn,Iu;function ep(){if(Iu)return vn;Iu=1;var n=es(),e=ts(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return vn=r,vn}var mn,Cu;function Il(){if(Cu)return mn;Cu=1;var n=ep(),e=ts(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,o=n(function(){return arguments}())?n:function(c){return e(c)&&r.call(c,"callee")&&!i.call(c,"callee")};return mn=o,mn}var _n,$u;function tp(){if($u)return _n;$u=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return _n=e,_n}var gn,qu;function rp(){if(qu)return gn;qu=1;var n=Ut(),e=Il(),t=gt(),r=jl(),i=tp(),o=is();function c(h,f,p){f=n(f,h);for(var y=-1,k=f.length,E=!1;++y<k;){var S=o(f[y]);if(!(E=h!=null&&p(h,S)))break;h=h[S]}return E||++y!=k?E:(k=h==null?0:h.length,!!k&&i(k)&&r(S,k)&&(t(h)||e(h)))}return gn=c,gn}var bn,Du;function np(){if(Du)return bn;Du=1;var n=Yd(),e=rp();function t(r,i){return r!=null&&e(r,i,n)}return bn=t,bn}var wn,Lu;function sp(){if(Lu)return wn;Lu=1;var n=Zd(),e=np();function t(r,i){return n(r,i,function(o,c){return e(r,c)})}return wn=t,wn}var kn,Mu;function ip(){if(Mu)return kn;Mu=1;function n(e,t){for(var r=-1,i=t.length,o=e.length;++r<i;)e[o+r]=t[r];return e}return kn=n,kn}var xn,Uu;function op(){if(Uu)return xn;Uu=1;var n=qt(),e=Il(),t=gt(),r=n?n.isConcatSpreadable:void 0;function i(o){return t(o)||e(o)||!!(r&&o&&o[r])}return xn=i,xn}var En,zu;function ap(){if(zu)return En;zu=1;var n=ip(),e=op();function t(r,i,o,c,h){var f=-1,p=r.length;for(o||(o=e),h||(h=[]);++f<p;){var y=r[f];i>0&&o(y)?i>1?t(y,i-1,o,c,h):n(h,y):c||(h[h.length]=y)}return h}return En=t,En}var Sn,Nu;function up(){if(Nu)return Sn;Nu=1;var n=ap();function e(t){var r=t==null?0:t.length;return r?n(t,1):[]}return Sn=e,Sn}var An,Gu;function lp(){if(Gu)return An;Gu=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return An=n,An}var Pn,Fu;function cp(){if(Fu)return Pn;Fu=1;var n=lp(),e=Math.max;function t(r,i,o){return i=e(i===void 0?r.length-1:i,0),function(){for(var c=arguments,h=-1,f=e(c.length-i,0),p=Array(f);++h<f;)p[h]=c[i+h];h=-1;for(var y=Array(i+1);++h<i;)y[h]=c[h];return y[i]=o(p),n(r,this,y)}}return Pn=t,Pn}var Tn,Bu;function hp(){if(Bu)return Tn;Bu=1;function n(e){return function(){return e}}return Tn=n,Tn}var Rn,Vu;function fp(){if(Vu)return Rn;Vu=1;function n(e){return e}return Rn=n,Rn}var On,Hu;function dp(){if(Hu)return On;Hu=1;var n=hp(),e=Ol(),t=fp(),r=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return On=r,On}var jn,Ju;function pp(){if(Ju)return jn;Ju=1;var n=800,e=16,t=Date.now;function r(i){var o=0,c=0;return function(){var h=t(),f=e-(h-c);if(c=h,f>0){if(++o>=n)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return jn=r,jn}var In,Ku;function yp(){if(Ku)return In;Ku=1;var n=dp(),e=pp(),t=e(n);return In=t,In}var Cn,Wu;function vp(){if(Wu)return Cn;Wu=1;var n=up(),e=cp(),t=yp();function r(i){return t(e(i,void 0,n),i+"")}return Cn=r,Cn}var $n,Xu;function mp(){if(Xu)return $n;Xu=1;var n=sp(),e=vp(),t=e(function(r,i){return r==null?{}:n(r,i)});return $n=t,$n}/**
 * @react-router/dev v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qn,Qu;function _p(){if(Qu)return qn;Qu=1;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,c=(j,U)=>{for(var z in U)e(j,z,{get:U[z],enumerable:!0})},h=(j,U,z,Z)=>{if(U&&typeof U=="object"||typeof U=="function")for(let W of r(U))!o.call(j,W)&&W!==z&&e(j,W,{get:()=>U[W],enumerable:!(Z=t(U,W))||Z.enumerable});return j},f=(j,U,z)=>(z=j!=null?n(i(j)):{},h(!j||!j.__esModule?e(z,"default",{value:j,enumerable:!0}):z,j)),p=j=>h(e({},"__esModule",{value:!0}),j),y={};c(y,{getAppDirectory:()=>L,index:()=>V,layout:()=>ce,prefix:()=>O,relative:()=>P,route:()=>Q}),qn=p(y);var k=f(cd()),E=f(hd()),S=f(mp());function T(j,U){if(j===!1||j===null||typeof j>"u")throw console.error("The following error is a bug in React Router; please open an issue! https://github.com/remix-run/react-router/issues/new/choose"),new Error(U)}function L(){return T(globalThis.__reactRouterAppDirectory),globalThis.__reactRouterAppDirectory}var q=E.pipe(E.custom(j=>!(typeof j=="object"&&j!==null&&"then"in j&&"catch"in j),"Invalid type: Expected object but received a promise. Did you forget to await?"),E.object({id:E.optional(E.string()),path:E.optional(E.string()),index:E.optional(E.boolean()),caseSensitive:E.optional(E.boolean()),file:E.string(),children:E.optional(E.array(E.lazy(()=>q)))}));E.array(q);var H=["id","index","caseSensitive"];function Q(j,U,z,Z){let W={};return Array.isArray(z)||!z?Z=z:W=z,{file:U,children:Z,path:j??void 0,...(0,S.default)(W,H)}}var K=["id"];function V(j,U){return{file:j,index:!0,...(0,S.default)(U,K)}}var J=["id"];function ce(j,U,z){let Z={};return Array.isArray(U)||!U?z=U:Z=U,{file:j,children:z,...(0,S.default)(Z,J)}}function O(j,U){return U.map(z=>z.index||typeof z.path=="string"?{...z,path:z.path?I(j,z.path):j,children:z.children}:z.children?{...z,children:O(j,z.children)}:z)}function P(j){return{route:(U,z,...Z)=>Q(U,k.resolve(j,z),...Z),index:(U,...z)=>V(k.resolve(j,U),...z),layout:(U,...z)=>ce(k.resolve(j,U),...z),prefix:O}}function I(j,U){return[j.replace(/\/+$/,""),U.replace(/^\/+/,"")].join("/")}return qn}var _e=_p();const Ae={landing:"/",dashboard:"/dashboard",myPets:"/my-pets",exploreLostPets:"/lost-pets",reportLostPet:"/report-lost-pet",reportFoundPet:"/report-found-pet",petDetails:"/pet",editPet:"/edit-pet",resetPassword:"/reset-password",login:"/login",signUp:"/sign-up"};_e.index("routes/landing.tsx"),_e.layout("routes/auth_layout.tsx",[_e.route(Ae.login,"routes/login.tsx")]),_e.layout("routes/protected_layout.tsx",[_e.route(Ae.dashboard,"routes/dashboard.tsx"),_e.route(Ae.myPets,"routes/my_pets.tsx"),_e.route(`${Ae.petDetails}/:petId`,"routes/pet.tsx"),_e.route(`${Ae.editPet}/:petId`,"routes/edit_pet.tsx"),_e.route(Ae.reportLostPet,"routes/report_lost_pet.tsx"),_e.route(`${Ae.reportLostPet}/:petId`,"routes/report_lost_pet_form.tsx"),_e.route(`${Ae.reportFoundPet}/:petId`,"routes/report_found_pet.tsx")]),_e.route(Ae.exploreLostPets,"routes/lost_pets.tsx");/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bp=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Zu=n=>{const e=bp(n);return e.charAt(0).toUpperCase()+e.slice(1)},Cl=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=dt.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...h},f)=>dt.createElement("svg",{ref:f,...wp,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Cl("lucide",i),...h},[...c.map(([p,y])=>dt.createElement(p,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=(n,e)=>{const t=dt.forwardRef(({className:r,...i},o)=>dt.createElement(kp,{ref:o,iconNode:e,className:Cl(`lucide-${gp(Zu(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Zu(n),t};export{Mp as A,Lp as M,tt as _,Ae as a,$p as b,Op as c,Ip as d,zp as e,Cp as f,Dp as g,ud as h,jp as i,qp as j,kf as k,wf as s,Up as u};
