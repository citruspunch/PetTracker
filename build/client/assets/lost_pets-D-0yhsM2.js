import{w as B}from"./with-props-CT5oTX1a.js";import{w as C,o as a,x as L,a as M}from"./chunk-LSOULM7L-D3xIczIm.js";import{N as K}from"./navbar-Bv3E8Diz.js";import{B as T}from"./index-BBWdFQt1.js";import{S as j,f as Q}from"./animalTypes-BUt9dPzb.js";import{b as E,a as _,s as F,c as G}from"./supabase-BKc26Het.js";import{M as U}from"./index-DReurGeo.js";import{C as J}from"./circle-alert-Bzd_eruk.js";import"./index-DtIwZQYK.js";import"./iconBase-ENrf6fsT.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],V=E("arrow-right",O);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],X=E("map-pinned",W),ee=({heading:e,lostPets:t})=>{const s=C();return a.jsx("section",{className:"py-7 sm:py-12",children:a.jsxs("div",{className:"container mx-auto",children:[a.jsxs("div",{className:"flex w-full flex-row items-center justify-center px-3 sm:px-0 sm:justify-between mb-2 md:mb-4 lg:mb-5",children:[a.jsx("h2",{className:"text-3xl mb-5 font-semibold md:text-4xl text-center",children:e}),a.jsx("div",{className:"fixed bottom-7 right-6 sm:static",children:a.jsxs(T,{variant:"destructive",onClick:()=>s(_.reportLostPet),className:"bg-red-700 text-white rounded-md p-5 shadow-lg sm:rounded-md sm:p-1",children:[a.jsx(J,{className:"h-10 w-10 sm:h-8 sm:w-8"}),a.jsx("span",{children:"Reportar mascota perdida"})]})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx(j,{}),t.map((r,n)=>a.jsxs(L.Fragment,{children:[a.jsxs("div",{className:"grid items-center gap-4 px-4 py-5 md:grid-cols-6",children:[a.jsxs("div",{className:"order-2 flex items-center gap-2 md:order-none md:col-span-2",children:[a.jsx("span",{className:"flex mr-2 h-20 w-22 shrink-0 items-center justify-center rounded-md bg-muted",children:r.image?a.jsx("img",{src:F.storage.from("pets-portraits").getPublicUrl(r.image).data.publicUrl,alt:r.name??"Mascota perdida",loading:"lazy",className:"h-full w-full rounded-md object-cover"}):a.jsx(U,{className:"h-9 w-9 text-muted-foreground"})}),a.jsxs("div",{className:"flex flex-col w-full ",children:[a.jsx("h3",{className:"text-[18px] font-semibold",children:r.name}),a.jsx("span",{className:"text-[15px] text-muted-foreground",children:Q(r.species)}),a.jsx("span",{className:"text-[15px] font-semibold  text-red-400",children:r.created_at})]})]}),a.jsxs("div",{className:"flex flex-row items-center gap-4 md:order-none md:col-span-3",children:[a.jsx(X,{}),a.jsx("p",{className:"order-1 text-2xl font-semibold md:order-none md:col-span-2 line-clamp-2",children:r.last_seen_address})]}),a.jsxs(T,{variant:"outline",onClick:()=>s(`${_.petDetails}/${r.petId}`),className:"order-3 ml-auto w-fit gap-2 md:order-none",children:[a.jsx("span",{children:"Ver más"}),a.jsx(V,{className:"h-4 w-4"})]})]}),a.jsx(j,{})]},n))]})]})})},te=()=>{const e=C();return a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[a.jsx(U,{className:"h-16 w-16 mb-4"}),a.jsx("p",{className:"text-lg font-semibold ",children:"No hay mascotas perdidas"}),a.jsx("p",{className:"text-sm text-muted-foreground w-5/6",children:"Parece que no hay reportes de mascotas perdidas en este momento."}),a.jsx(T,{variant:"destructive",onClick:()=>e(_.reportLostPet),className:"mt-6 mb-30 bg-red-700 text-white ",children:"Reportar una mascota perdida"})]})};function w({className:e,...t}){return a.jsx("div",{"data-slot":"skeleton",className:G("bg-accent animate-pulse rounded-md",e),...t})}const ne=()=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx(j,{}),Array(3).fill(null).map((e,t)=>a.jsxs(L.Fragment,{children:[a.jsxs("div",{className:"grid items-center gap-4 px-4 py-5 md:grid-cols-6",children:[a.jsxs("div",{className:"order-2 flex items-center gap-2 md:order-none md:col-span-2",children:[a.jsx("span",{className:"flex mr-2 h-20 w-22 shrink-0 items-center justify-center rounded-md bg-muted",children:a.jsx(w,{className:"h-full w-full rounded-md"})}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsx(w,{className:"h-5 w-3/4 mb-2"}),a.jsx(w,{className:"h-4 w-1/2 mb-1"}),a.jsx(w,{className:"h-4 w-1/3"})]})]}),a.jsxs("div",{className:"flex flex-row items-center gap-4 md:order-none md:col-span-3",children:[a.jsx(w,{className:"h-6 w-6"}),a.jsx(w,{className:"h-5 w-full"})]}),a.jsx("div",{className:"order-3 ml-auto w-fit gap-2 md:order-none",children:a.jsx(w,{className:"h-8 w-20 rounded-md"})})]}),a.jsx(j,{})]},t))]});var A=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function se(e){const t=e.match(A);if(t){const s=Number(t[2]);if(s<1||s>12)return!1;if(typeof t[3]!==void 0){const r=Number(t[3]);if(r<1||r>31)return!1}if(typeof t[4]!==void 0){const r=Number(t[4]);if(r<0||r>23)return!1}return!0}return!1}function re(e){const t=e.match(A);return t&&typeof t[4]>"u"?e+="T00:00:00":e}function v(e){if(e||(e=new Date),e instanceof Date){const t=new Date(e);return t.setMilliseconds(0),t}if(e=e.trim(),se(e))return new Date(re(e));throw new Error(`Non ISO 8601 compliant date (${e}).`)}var Z="1999-03-04T02:05:01.000Z",b=new Map,Y=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],R=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],H=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]];function ae(e){if(/^[+-]\d{2}:\d{2}/.test(e))return 6;if(/^[+-]\d{4}/.test(e))return 5;throw new Error("Invalid offset format")}var oe=["MMMM","MMM","dddd","ddd"],h=new Map([...Y,...R,...H].map(e=>[e[0],e])),k=new Map,ie=["full","long","medium","short"];function x(e){return e.type==="literal"&&(e.value=e.value.normalize("NFKC")),e}function ce(e,t,s,r=!1,n=null){const i=de(e,t,s,r),c=v(e);function m({partName:d,partValue:p,token:o}){if(d==="literal")return p;const l=i[d];if(d==="hour"&&o==="H")return l.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(o)&&l.length===1)return`0${l}`;if(d==="dayPeriod"){const f=fe(c.getUTCHours()<12?"am":"pm",s);return o==="A"?f.toUpperCase():f.toLowerCase()}return d==="timeZoneName"?n??z(-1*c.getTimezoneOffset(),o):l}return t.map(d=>({...d,value:m(d)}))}function de(e,t,s,r=!1){const n=v(e),i=t.filter(o=>o.hour12),c=t.filter(o=>!o.hour12),m=[],d=[];function p(o,l=!1){const f=`${s}-u-hc-${l?"h12":"h23"}`;if(m.push(...new Intl.DateTimeFormat(f,o.reduce((u,g)=>g.partName==="literal"?u:(r&&oe.includes(g.token)&&d.push(g),Object.assign(u,g.option)),{timeZone:"UTC"})).formatToParts(n).map(x)),r&&d.length)for(const u of d){let g=[];switch(u.token){case"MMMM":g=new Intl.DateTimeFormat(f,{dateStyle:"long",timeZone:"UTC"}).formatToParts(n).map(x);break;case"MMM":g=new Intl.DateTimeFormat(f,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(n).map(x);break}const y=g.find(N=>N.type===u.partName),$=m.findIndex(N=>N.type===u.partName);y&&$>-1&&(m[$]=y)}}return i.length&&p(i,!0),c.length&&p(c),m.reduce((o,l)=>(o[l.type]=l.value,o),{})}function z(e,t="Z"){const s=String(Math.floor(Math.abs(e/60))).padStart(2,"0"),r=String(Math.abs(e%60)).padStart(2,"0"),n=e<0?"-":"+";return t==="ZZ"?`${n}${s}${r}`:`${n}${s}:${r}`}function le(e,t){me(e,t);const[s,r,n,i]=e.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),c=Number(n)*60+Number(i);return r==="+"?c:-c}function me(e,t="Z"){if(!(r=>{switch(r){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(e);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(e)}})(t))throw new Error(`Invalid offset: ${e}`);return e}function ue(e){return typeof e=="string"?e.includes("ZZ")?"ZZ":"Z":"time"in e&&e.time==="full"?"Z":"ZZ"}function fe(e,t){const s=k.get(t);if(s&&s[e])return s[e];const r=new Date(Z);r.setUTCHours(e==="am"?5:20);const i=new Intl.DateTimeFormat(t,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(r).map(x).find(c=>c.type==="dayPeriod");if(i){const c=s||{};return k.set(t,Object.assign(c,{[e]:i.value})),i.value}return e}function he(e,t="+00:00"){const s=v(e),r=(()=>{switch(ae(t)){case 5:return"ZZ";case 6:return"Z"}})(),n=le(t,r);return new Date(s.getTime()+n*1e3*60)}function q(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function P(e,t){const s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hourCycle:"h23"}).formatToParts(e).map(x),r={};return s.forEach(n=>{r[n.type]=n.value}),new Date(`${r.year}-${r.month}-${r.day}T${r.hour}:${r.minute}:${r.second}Z`)}function S(e,t="UTC",s="device",r="Z"){var n;s=s==="device"?(n=q())!=null?n:"utc":s;const i=v(e),c=P(i,t),m=P(i,s),d=Math.round((m.getTime()-c.getTime())/1e3/60);return z(d,r)}function pe(e,t){if(ie.includes(e)||typeof e=="object")return ge(e,t);let s=e,r=0;const n=o=>{if(o[2]||(o[2]=new RegExp(`(.)?(${o[0]})`,"g")),o[2].test(s)){let l=0;return s=s.replace(o[2],(f,u,g)=>u==="\\"?g:`${typeof u=="string"?u:""}{!${l++?r:r++}!}`),!!l}return!1};function i(o){const l=o.map(u=>u.partName),f=new Set(l);if(l.length>f.size)throw new Error("Cannot reuse format tokens.");return o}function c(o,[l,f,u]){const g=Object.keys(f)[0],y=f[g];return{option:f,partName:g,partValue:y,token:l,pattern:u,hour12:o}}const m=Y.filter(n).concat(R.filter(n)).map(c.bind(null,!1)),d=i(m.concat(H.filter(n).map(c.bind(null,!0)))),p=/^\{!(\d+)!\}$/;return s.split(/(\{!\d+!\})/).map(o=>{const l=o.match(p);return l?d[Number(l[1])]:{option:{literal:o},partName:"literal",partValue:o,token:o,pattern:new RegExp(""),hour12:!1}}).filter(o=>!(o.partName==="literal"&&o.partValue===""))}function ge(e,t){const s={timeZone:"UTC"};typeof e=="string"?s.dateStyle=e:("date"in e&&(s.dateStyle=e.date),"time"in e&&(s.timeStyle=e.time));const r=new Intl.DateTimeFormat(t,s),n=r.formatToParts(new Date(Z)).map(x),c=r.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(x).find(d=>d.type==="hour"),m=c&&c.value==="23"?24:12;return n.map(d=>{const p=d.type,o=xe(d.type,d.value,t,d.type==="hour"?m:void 0,s);if(o===void 0)return;const l=o[1][p];if(l)return o[2]||(o[2]=new RegExp(`${o[0]}`,"g")),{option:{[p]:l},partName:p,partValue:l,token:o[0],pattern:o[2],hour12:m===12}}).filter(d=>!!d)}function xe(e,t,s,r,n){const i=t.length,c=!isNaN(Number(t));let m;switch(e){case"year":return i===2?h.get("YY"):h.get("YYYY");case"month":if(c)return i===1?h.get("M"):h.get("MM");switch(m=D(s,e,t),m){case"long":return h.get("MMMM");default:return h.get("MMM")}case"day":return i===1?h.get("D"):h.get("DD");case"weekday":switch(m=D(s,e,t),m){case"narrow":return h.get("d");case"short":return h.get("ddd");default:return h.get("dddd")}case"hour":return r===12?i===1?h.get("h"):h.get("hh"):i===1?h.get("H"):h.get("HH");case"minute":return i===1?h.get("m"):h.get("mm");case"second":return i===1?h.get("s"):h.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(t)?h.get("A"):h.get("a");case"literal":return[t,{literal:t},new RegExp("")];case"timeZoneName":return n.timeStyle==="full"?h.get("Z"):h.get("ZZ");default:return}}function D(e,t,s){if(!b.has(e)){const n=new Date(Z),i=[3,8,9,7,6,4,3],c=["weekday","month","dayPeriod"],m=["long","short","narrow"],d={};for(let p=0;p<12;p++){n.setMonth(0+p),p in i&&n.setDate(i[p]),n.setUTCHours(8+p);for(const o of m){const l=new Intl.DateTimeFormat(e,c.reduce((f,u)=>Object.assign(f,{[u]:o}),{hour12:!0,timeZone:"UTC"})).formatToParts(n).map(x);if(o==="long"||o==="short"){const u=new Intl.DateTimeFormat(e,{dateStyle:o==="short"?"medium":"long",timeZone:"UTC"}).formatToParts(n).map(x).find(y=>y.type==="month"),g=l.findIndex(y=>y.type==="month");g>-1&&u&&(l[g]=u)}l.forEach(f=>{if(f.type==="literal")return;const u=f.type;d[u]=Object.assign(d[u]||{},{[f.value]:o})})}}b.set(e,d)}const r=b.get(e);return r?r[t][s]:void 0}function ye(e,t="+00:00"){const s=t.slice(0,1)==="+";return he(e,t.replace(s?"+":"-",s?"-":"+"))}function we(){return Intl.DateTimeFormat().resolvedOptions().locale}function I(e,t="long",s="device",r=!1,n){let i,c;return typeof e=="object"&&!(e instanceof Date)&&({date:e,format:t,locale:s,genitive:r,partFilter:n,tz:i}=e),t==="ISO8601"?v(e).toISOString():(i&&(c=S(e,"utc",i,ue(t))),i??(i=q()),(i==null?void 0:i.toLowerCase())!=="utc"&&(e=ye(e,S(e,i,"utc"))),(!s||s==="device")&&(s=we()),ce(e,pe(t,s).filter(n??(()=>!0)),s,r,c).map(m=>m.value).join(""))}const ve=async()=>{const e=F.from("lost_pet_report").select(`
        id,
        created_at,
        last_seen_date,
        found_date,
        last_seen_address,
        contact_number,
        pet (
          id,
          name,
          image,
          owner,
          sex,
          animal_type,
          breed,
          spayed_or_neutered,
          notes,
          birth_date
        )
      `).is("found_date",null).order("created_at",{ascending:!1}),{data:t,error:s}=await e;return console.log("Lost pets data:",t),s?(console.error("Error fetching lost pets:",s.message),[]):t?t.map(n=>{var i,c,m,d,p,o,l,f,u;return{id:n.id,created_at:I(new Date(n.created_at),"long","es"),last_seen_date:n.last_seen_date,found_date:n.found_date?I(new Date(n.found_date),"long","es"):null,last_seen_address:n.last_seen_address,contact_number:n.contact_number,petId:(i=n.pet)==null?void 0:i.id,name:((c=n.pet)==null?void 0:c.name)??"",image:((m=n.pet)==null?void 0:m.image)??"",owner:((d=n.pet)==null?void 0:d.owner)??"",sex:((p=n.pet)==null?void 0:p.sex)??"",species:((o=n.pet)==null?void 0:o.animal_type)??"",breed:((l=n.pet)==null?void 0:l.breed)??"",spayed_or_neutered:((f=n.pet)==null?void 0:f.spayed_or_neutered)??!1,notes:n.pet.notes,age:(u=n.pet)!=null&&u.birth_date?je(n.pet.birth_date):null}}):[]},je=e=>{const t=new Date,s=new Date(e),r=t.getTime()-s.getTime(),n=Math.floor(r/(1e3*60*60*24));return n<30?`${n} dias`:n<365?Math.floor(n/30)===1?`${Math.floor(n/30)} mes`:`${Math.floor(n/30)} meses`:`${Math.floor(n/365)} años`},Ne=({heading:e="Mascotas Perdidas"})=>{const[t,s]=M.useState([]),[r,n]=M.useState(!0);return M.useEffect(()=>{(async()=>{try{const c=await ve();s(c),n(!1)}catch(c){console.error("Error fetching lost pets:",c)}})()},[]),a.jsxs(a.Fragment,{children:[a.jsx(K,{}),r&&a.jsx("section",{className:"py-8",children:a.jsxs("div",{className:"container mx-auto",children:[a.jsx("h1",{className:"text-center md:text-start mb-8 px-4 text-3xl font-semibold md:text-4xl",children:e}),a.jsx(ne,{})]})}),!r&&t.length===0&&a.jsx(te,{}),!r&&t.length>0&&a.jsx(ee,{heading:e,lostPets:t})]})},Ce={title:"Mascotas perdidas"},Me=()=>a.jsx(Ne,{}),Le=B(Me);export{Le as default,Ce as meta};
